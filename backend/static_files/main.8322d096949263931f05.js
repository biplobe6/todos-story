(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"./app/Styles/app.scss":function(e,t,n){},"./app/index.js":function(e,t,n){"use strict";n.r(t);function o(e){var t=e.turnOnModal;return v.a.createElement("button",{title:"Add Project",id:"add-project-button","data-target-modal":"project","data-back-drop":"true",onClick:t},v.a.createElement("div",{className:"content"},"+"))}var b=n("./node_modules/react/index.js"),v=n.n(b),r=n("./node_modules/react-dom/index.js"),a=n.n(r),i=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/prop-types/index.js"),s=n.n(c),T=(n("./app/Styles/app.scss"),"ADD-PROJECT"),k="DELETE-PROJECT",_="UPDATE-PROJECT",C="GET-PROJECT-LIST",d="MODAL-TURN-ON",H="GET-TODO-LIST",x="ADD-TODO",A="UPDATE-TODO",I="DELETE-TODO",N="DRAGGING-TODO",M="MOVE-TODO";o.propTypes={};var l={turnOnModal:function(t){return function(e){e({type:d,payload:{data:t}})}}},u=Object(i.b)(null,l)(o),p=n("./node_modules/lodash/get.js"),f=n.n(p),y=n("./node_modules/lodash/isFunction.js"),h=n.n(y),m=n("./node_modules/lodash/isString.js"),g=n.n(m),O=n("./node_modules/lodash/isArray.js"),w=n.n(O);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(o=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function E(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function P(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach(function(e){V(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e){var o=e.config,r=e.method,t=e.oldPayload,a=e.dispatch,n=e.isInvalidReduxRequest,i=E(e,["config","method","oldPayload","dispatch","isInvalidReduxRequest"]),c=i.response,s=R({data:function(e){var t=e.oldPayload,n=e.response,o=f()(n,"data.results",f()(n,"data",!1));if(!w()(o))return o;if(!f()(t,"hasMore",!1))return o;var r=f()(t,"data",!1);return w()(r)?[].concat(P(r),P(o)):o}({oldPayload:t,response:c}),loading:!1,error:!1,hasMore:Boolean(f()(c,"data.next",!1)),loadMore:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var t=e.payload,n=e.method,o=e.config,r=void 0===o?{}:o,a=e.response,i=e.dispatch,c=e.loadMoreArgs;if(t.hasMore){var s=a.data.next,l=B(R({},r,{BASE_URL:"",url:s,type:n,isUrlString:!0,isUrlFunc:!1}));return G(R({},r,{apiType:n,config:r,axiosRequest:l,oldPayload:t,oldDispatch:i})).apply(void 0,P(c))}}({payload:s,method:r,config:o,response:c,dispatch:a,loadMoreArgs:t})},getData:function(e,t){return e?f()(s.data,e,t):s.data},is:{success:null,error:null,forbidden:null}},i);return s.is.success=!s.loading&&!s.error&&c&&c.status>=K&&c.status<Z,s.is.error=!s.loading&&!c&&s.error&&s.error.response,s.is.forbidden=s.is.error&&s.error.response.status==X,n?s:a?void a(s):s}function F(e,t,n){var o=0<arguments.length&&void 0!==e?e:[],r=1<arguments.length?t:void 0,a=2<arguments.length?n:void 0,i=o[r];o[r]=o[a],o[a]=i}function U(e,t,n,o){var r,a=0<arguments.length&&void 0!==e?e:[],i=1<arguments.length?t:void 0,c=2<arguments.length?n:void 0,s=!(3<arguments.length&&void 0!==o)||o;return 1<a.length&&(i<(r=function(e,t,n,o){for(var r=0<arguments.length&&void 0!==e?e:[],a=1<arguments.length?t:void 0,i=2<arguments.length?n:void 0,c=!(3<arguments.length&&void 0!==o)||o,s=r[Math.floor((i+a)/2)].position,l=a,u=i;l<=u;){for(;c?r[l].position<s:r[l].position>s;)l++;for(;c?r[u].position>s:r[u].position<s;)u--;l<=u&&(F(r,l,u),l++,u--)}return l}(a,i,c,s))-1&&U(a,i,r-1,s),r<c&&U(a,r,c,s)),a}function q(e,t){var n=0<arguments.length&&void 0!==e?e:[],o=!(1<arguments.length&&void 0!==t)||t;1<n.length&&U(n,0,n.length-1,o)}var K=200,Z=300,X=403,B=function(e){var v=e.BASE_URL,g=e.url,O=e.type,w=e.axios,j=e.isUrlString,E=e.isUrlFunc,P=e.reservedParams;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o,r,a,i,c,s,l=S((o=t,r=0,a=null,["post","patch","put"].includes(O)&&(a=0,r=1),[o[a],o[r]]),2),u=l[0],p=l[1],d=null!=u,f=p||{},y=u||{},h=[],m=v,b={params:E?(i=f,c=P,s={},Object.keys(i).forEach(function(e){c.includes(e)||(s[e]=i[e])}),s):f};return j&&(m+=g),E&&(m+=g(f)),h.push(m),d&&h.push(y),h.push(b),w[O].apply(w,h)}},G=function(e){var t=e.API,n=e.isInvalidReduxRequest,o=e.oldDispatch,r=e.apiType,a=e.ACTION_LIST,i=e.config,c=e.axiosRequest,s=e.oldPayload,l=t[r];null==c&&(c=l);function u(e){var t=j({},e);return L(R({config:i,oldPayload:s,method:r,isInvalidReduxRequest:n},t))}function p(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];return new Promise(function(t,n){c.apply(void 0,o).then(function(e){t(u({response:e}))}).catch(function(e){n(u({error:e}))})})}if(n)return p;function d(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(n,o){function t(e){var t=j({},e);return u(R({type:f,dispatch:n,store:o()},t))}t({loading:!0}),c.apply(void 0,r).then(function(e){t({response:e})}).catch(function(e){t({error:e})})}}var f=a[r];return o?function(){return d.apply(void 0,arguments)(o)}:Object.assign(d,{reduxAction:d,axiosRequest:p,actionType:f})},J=function(e){var l=e.axios,t=e.urlPrefix,u=void 0===t?"":t,p={};return{registerApi:function(e){var t,n,o=e.url,r=e.actionType,a=void 0===r?"":r,i=e.stateName,c=void 0===i?"":i,s={axios:l,urlPrefix:u,RootReducer:p,url:o,actionType:a,stateName:c,BASE_URL:u,isUrlString:g()(o),isUrlFunc:h()(o),reservedParams:[],isInvalidReduxRequest:""==a||""==c,ACTION_LIST:{get:"".concat(a,"_GET"),delete:"".concat(a,"_DELETE"),post:"".concat(a,"_POST"),patch:"".concat(a,"_PATCH"),put:"".concat(a,"_PUT")},API:{},ACTION:{get:function(e){},delete:function(e){},post:function(e,t){},patch:function(e,t){},put:function(e,t){}}};return s.isUrlFunc&&(s.reservedParams=(t=s.url,n=[],t(new Proxy({},{get:function(e,t){return n.push(t),e[t]}})),n)),s.API={get:B(R({},s,{type:"get"})),delete:B(R({},s,{type:"delete"})),post:B(R({},s,{type:"post"})),patch:B(R({},s,{type:"patch"})),put:B(R({},s,{type:"put"}))},s.ACTION={get:G(R({},s,{config:s,apiType:"get"})),delete:G(R({},s,{config:s,apiType:"delete"})),post:G(R({},s,{config:s,apiType:"post"})),patch:G(R({},s,{config:s,apiType:"patch"})),put:G(R({},s,{config:s,apiType:"put"}))},s.isInvalidReduxRequest?R({},s.ACTION):(p[c]=function(e){var n=(0<arguments.length&&void 0!==e?e:{}).ACTION_LIST,o=L({});return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:o,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case n.get:return t;default:return e}}}(R({},s)),R({},s.ACTION,{stateName:s.stateName,getState:function(e){return e[s.stateName]}}))},getReducer:function(){return p}}},W=n("./node_modules/axios/index.js"),z=J({urlPrefix:"/api/v1",axios:n.n(W).a.create({baseURL:"/",xsrfHeaderName:"X-CSRFToken",xsrfCookieName:"csrftoken"})}).registerApi,Q={projects:z({url:"/project"}),project:z({url:function(e){var t=e.alias;return"/project/".concat(t)}}),projectExport:z({url:function(e){var t=e.alias;return"/project/export/".concat(t)}}),projectImport:z({url:function(e){var t=e.alias;return"/project/import/".concat(t)}}),todos:z({url:"/todo"}),todo:z({url:function(e){var t=e.alias;return"/todo/".concat(t)}}),startTodo:z({url:function(e){var t=e.alias;return"/todo/start/".concat(t)}}),stopTodo:z({url:function(e){var t=e.alias;return"/todo/stop/".concat(t)}})},Y=n("./node_modules/redux-thunk/es/index.js"),$=n("./node_modules/redux/es/redux.js");function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ce(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}function se(e){var t=0<arguments.length&&void 0!==e?e:pe;return function(){function e(){return ae(this,e),te(this,ne(e).apply(this,arguments))}return oe(e,t),ce(e,[{key:"updateProgress",value:function(e,o){var r=o.progress=0;e.forEach(function(e){var t=e.duration;r+=t}),e.forEach(function(e){var t=e.progress,n=e.duration;o.progress+=n/r*t})}},{key:"updateRootProgress",value:function(){this.updateProgress(this.todos,this)}},{key:"updateParentProgress",value:function(e){var t=this.todosHash[e];this.updateProgress(t.subTask,t),t.parent?this.updateParentProgress(t.parent):this.updateRootProgress()}},{key:"addToProgress",value:function(e){e.done?e.progress=100:this.updateProgress(e.subTask,e),e.parent?this.updateParentProgress(e.parent):this.updateRootProgress()}}]),e}()}function le(e){var t=0<arguments.length&&void 0!==e?e:pe;return function(){function e(){return ae(this,e),te(this,ne(e).apply(this,arguments))}return oe(e,t),ce(e,[{key:"sort",value:function(e){q(e,this.ascOrder)}}]),e}()}var ue=function(){function e(){ae(this,e),this.todos=[],this.todosHash={},this.updatedAt=(new Date).getTime(),this.progress=0,this.ascOrder=!0}return ce(e,[{key:"updateProgress",value:function(){}},{key:"updateRootProgress",value:function(){}},{key:"updateParentProgress",value:function(){}},{key:"addToProgress",value:function(){}},{key:"sort",value:function(){}}]),e}(),pe=function(){function e(){return ae(this,e),te(this,ne(e).apply(this,arguments))}return oe(e,ue),ce(e,[{key:"sortAll",value:function(){var n=this;this.updatedAt=(new Date).getTime(),function t(e){n.sort(e),e.forEach(function(e){e.updatedAt=n.updatedAt,t(e.subTask)})}(this.todos)}},{key:"setUpdatedAt",value:function(e,t){var n=(0<arguments.length&&void 0!==e?e:{}).alias,o=(1<arguments.length?t:void 0)||{updatedAt:(new Date).getTime()},r=this.todosHash[n];if(r){Object.assign(r,o);var a=this.todosHash[r.parent];a&&a.alias?this.setUpdatedAt(a,o):this.updatedAt=o.updatedAt}else this.updatedAt=o.updatedAt}},{key:"getTodo",value:function(e){var t=e.alias;return this.todosHash[t]}},{key:"addTodo",value:function(e){var t=Object.assign({},e),n=this.todosHash[t.alias];if(n?Object.assign(t,n):this.todosHash[t.alias]=t,t.subTask||(t.subTask=[]),t.parent){var o=this.todosHash[t.parent];o||(o={subTask:[]},this.todosHash[t.parent]=o),o.subTask.push(t),this.sort(o.subTask)}else this.todos.push(t),this.sort(this.todos);this.addToProgress(t),this.setUpdatedAt(t)}},{key:"deleteTodo",value:function(e){var t,n=e.alias,o=this.todosHash[n];if(o.parent){var r=this.todosHash[o.parent];t=r.subTask.findIndex(function(e){return e.alias==n}),r.subTask.splice(t,1),this.updateParentProgress(o.parent),this.setUpdatedAt({alias:o.parent})}else t=this.todos.findIndex(function(e){return e.alias==n}),this.todos.splice(t,1),this.updateRootProgress(),this.setUpdatedAt();delete this.todosHash[n]}},{key:"updateTodo",value:function(e){var t=this.todosHash[e.alias],n=Object.assign({},t,e);this.deleteTodo({alias:n.alias}),this.addTodo(n)}}]),e}(),de=function(){function e(){return ae(this,e),te(this,ne(e).apply(this,arguments))}return oe(e,le(se(pe))),e}();function fe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ye(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function he(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ye(Object(n),!0).forEach(function(e){me(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(){var e=new de;return e.ascOrder=!1,e}function ve(e,t){var n=t.payload.data;return e.prms[n.project].updateTodo(n),he({},e,{list:fe(e.list)})}var ge={prms:{},list:[],draggingTodo:null},Oe={list:[],hash:{},idList:[]},we=n("./node_modules/shortid/index.js");function je(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function Pe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(n),!0).forEach(function(e){Se(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var De,Te={data:{},order:[],activeModal:null},ke=Object($.c)({project:function(e,t){var n,o,r,a,i,c,s,l,u,p,d,f,y,h,m,b,v,g,O,w,j,E,P,S=0<arguments.length&&void 0!==e?e:ge,D=1<arguments.length?t:void 0;switch(D.type){case C:return w=S,j=D.payload.data,E={},P=j.map(function(e){var t=be();return he({},e,{prm:E[e.alias]=t})}),he({},w,{list:fe(P),prms:E});case T:return b=S,v=D.payload.data,g=be(),O=he({},v,{prm:g}),he({},b,{prms:he({},b.prm,me({},v.alias,g)),list:[].concat(fe(b.list),[O])});case _:return y=S,h=D.payload.data,m=y.list.findIndex(function(e){return e.alias==h.alias}),y.list[m]=he({},y.list[m],{},h),he({},y,{list:fe(y.list)});case k:return function(e,t){var n=t.payload.data;delete e.prms[n.alias];var o=e.list.filter(function(e){return e.alias!=n.alias});return he({},e,{prms:he({},e.prms),list:fe(o)})}(S,D);case H:return i=S,c=D.payload,s=c.data,l=c.project,u=i.prms,p=i.list,d=be(),f=p.findIndex(function(e){return e.alias=l.alias}),p[f]=he({},l,{prm:d}),s.forEach(function(e){d.addTodo(e)}),he({},i,{prms:he({},u,me({},l.alias,d)),list:fe(p)});case x:return r=S,a=D.payload.data,r.prms[a.project].addTodo(a),he({},r,{list:fe(r.list)});case I:return n=S,o=D.payload.data,n.prms[o.project].deleteTodo(o),he({},n,{list:fe(n.list)});case A:return ve(S,D);case N:return he({},S,{draggingTodo:D.payload.data});case M:return ve(S,D);default:return S}},todo:function(e,t){var n=0<arguments.length&&void 0!==e?e:Oe;return(1<arguments.length?t:void 0).type,n},modals:function(e,t){var n,o,r,a,i,c,s,l,u=0<arguments.length&&void 0!==e?e:Te,p=1<arguments.length?t:void 0;switch(p.type){case d:return n=u,o=p.payload.data.currentTarget,r=o.dataset,a=o.data,i=r.targetModal,c=r.backDrop,s=Object(we.generate)(),l={targetModal:i,id:s,backDrop:Boolean("true"==c),data:a||null},Pe({},n,{activeModal:l,data:Pe({},n.data,Se({},s,l)),order:[].concat(je(n.order),[s])});default:return u}}}),_e=window.__REDUX_DEVTOOLS_EXTENSION__?Object($.e)(ke,Object($.d)(Object($.a)(Y.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())):Object($.e)(ke,Object($.a)(Y.a)),Ce=_e;function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ae(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Ie(e){var o="function"==typeof Map?new Map:void 0;return(Ie=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==o){if(o.has(e))return o.get(e);o.set(e,n)}function n(){return Ne(e,arguments,Re(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Me(n,e)})(e)}function Ne(e,t,n){return(Ne=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&Me(r,n.prototype),r}).apply(null,arguments)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ve(e){var t=e.todoToMove,n=e.referenceTodo;return e.direction!=qe&&t.parent==n.parent}function Le(e){var t=e.referenceTodo,n=e.todoToMove,o=e.targetTodoList,r=o.findIndex(function(e){return e.alias==n.alias}),a=t.position,i=o.findIndex(function(e){return e.alias==t.alias}),c=i-1,s=o[c],l=(s||{position:null}).position,u=i+1,p=o[u];return{nextTodo:p,nextTodoIndex:u,nextTodoPosition:(p||{position:null}).position,todoIndex:r,refrenceTodoIndex:i,refrenceTodoPosition:a,previousTodo:s,previousTodoIndex:c,previousTodoPosition:l}}var Fe="up",Ue="down",qe="child",Ke=function(){function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n="at index '".concat(e,"'");return(t=Ae(this,Re(o).call(this,n))).position=e,t.name="SamePositionException",t.message=n,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(o,Ie(Error)),o}(),Ze=(xe(De={},Fe,function(e){var t=Le(e),n=t.previousTodoPosition,o=t.todoIndex,r=t.previousTodoIndex,a=t.refrenceTodoPosition;if(Ve(e)&&-1!=o&&o==r)throw new Ke(o);return null==n?a/2:(a+n)/2}),xe(De,Ue,function(e){var t=Le(e),n=t.nextTodoPosition,o=t.todoIndex,r=t.nextTodoIndex,a=t.refrenceTodoPosition;if(Ve(e)&&-1!=o&&o==r)throw new Ke(o);return null==n?a+1:(a+n)/2}),xe(De,qe,function(){return 1}),De);function Xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function Be(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xe(Object(n),!0).forEach(function(e){Ge(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Je(n){return function(t){Q.todos.get({project:n.alias}).then(function(e){t({type:H,payload:{project:n,data:e.getData()}})}).catch(function(e){console.error(e)})}}function We(e){var n=e.id,t=e.error,o=e.name,r=e.helpText;return t&&t[o]&&t[o].map(function(e,t){return v.a.createElement("small",{id:"".concat(n,"-help-").concat(t),key:e,className:"form-text text-danger"},e)})||r&&v.a.createElement("small",{id:"".concat(n,"-help"),className:"form-text text-muted"},r)||null}We.propTypes={error:s.a.any,helpText:s.a.string,id:s.a.string.isRequired,name:s.a.string.isRequired};var ze=We;function Qe(){return(Qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Ye(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $e(e){e.error,e.helpText;var t=e.id,n=e.label,o=Ye(e,["error","helpText","id","label"]);return v.a.createElement("div",{className:"form-group"},v.a.createElement("label",{htmlFor:t},n),v.a.createElement("input",Qe({id:t,className:"form-control","aria-describedby":"".concat(t,"-help")},o)),v.a.createElement(ze,e))}$e.defaultProps={type:"text"},$e.propTypes={name:s.a.string.isRequired,id:s.a.string.isRequired,type:s.a.string,title:s.a.string,placeholder:s.a.string,value:s.a.any,onChange:s.a.func,helpText:s.a.string};var et=$e;function tt(){return(tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function nt(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ot(e){var t=e.id,n=e.label,o=(e.error,e.helpText,nt(e,["id","label","error","helpText"]));return v.a.createElement("div",{className:"form-group"},v.a.createElement("label",{htmlFor:t},n),v.a.createElement("textarea",tt({className:"form-control",id:t},o)),v.a.createElement(ze,e))}ot.propTypes={id:s.a.string.isRequired,label:s.a.string.isRequired};var rt=ot;function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(){return(it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(n),!0).forEach(function(e){lt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ut(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yt(){}var ht=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=pt(r).call(this,e))||"object"!==at(o)&&"function"!=typeof o?dt(n):o).changeHandler=t.changeHandler.bind(dt(t)),t.submitHandler=t.submitHandler.bind(dt(t)),t.titleField=t.titleField.bind(dt(t)),t.descriptionField=t.descriptionField.bind(dt(t)),t.assetsDirField=t.assetsDirField.bind(dt(t)),t.state={loading:!1,done:!1,error:!1,form:{title:"",description:"",assets_dir:""}},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(r,b["Component"]),e=r,(t=[{key:"componentDidMount",value:function(){var e=this.props.project;e&&this.setState({form:{title:e.title,description:e.description,assets_dir:e.assets_dir}})}},{key:"changeHandler",value:function(e){var t=e.target,n=t.name,o=t.value;this.setState({form:st({},this.state.form,lt({},n,o))})}},{key:"titleField",value:function(e){var t=this.state,n=t.form,o=t.error;return v.a.createElement(et,it({},e,{type:"text",name:"title",label:"Title",error:o,id:"project-title",value:n.title,placeholder:"Project title",title:"Prject Name",helpText:"Project name/title",onChange:this.changeHandler}))}},{key:"descriptionField",value:function(e){var t=this.state,n=t.form,o=t.error;return v.a.createElement(rt,it({},e,{error:o,id:"project-story",label:"Description",name:"description",placeholder:"Project description",title:"Project Description",value:n.description,onChange:this.changeHandler,helpText:"A little description about this project."}))}},{key:"assetsDirField",value:function(e){var t=this.state,n=t.form,o=t.error;return v.a.createElement(et,it({},e,{type:"text",name:"assets_dir",label:"Assets Directory",error:o,id:"project-assets",value:n.assets_dir,placeholder:"Assets Directory",title:"Assets Directory",helpText:"Path of a directory for assets",onChange:this.changeHandler}))}},{key:"submitHandler",value:function(e){var t=this;e.preventDefault();var n=this.props,o=n.onSuccess,r=n.onError,a=n.addProject,i=n.updateProject,c=n.project;(c?i:a)({getPayload:function(){return t.state.form},oldPayload:function(){return c},onSuccess:function(){t.setState({loading:!1,done:!0},o)},onError:function(e){t.setState({error:f()(e,"error.response.data",!0),loading:!1},r)}}),this.setState({loading:!0,error:!1})}},{key:"render",value:function(){return this.props.children(st({},this.state,{onChange:this.changeHandler,onSubmit:this.submitHandler,TitleField:this.titleField,DescriptionField:this.descriptionField,AssetsDirField:this.assetsDirField}))}}])&&ut(e.prototype,t),n&&ut(e,n),r}();ht.defaultProps={onSuccess:yt,onError:yt},ht.propTypes={onSuccess:s.a.func,onError:s.a.func};var mt={addProject:function(n){return function(t){Q.projects.post(n.getPayload()).then(function(e){n.onSuccess(e),t({type:T,payload:{data:e.getData()}})}).catch(function(e){console.error(e),n.onError(e)})}},updateProject:function(n){return function(t){Q.project.put(n.getPayload(),{alias:n.oldPayload().alias}).then(function(e){n.onSuccess(e),t({type:_,payload:{data:e.getData(),oldData:n.oldPayload()}})}).catch(function(e){console.error(e),n.onError(e)})}}},bt=Object(i.b)(null,mt)(ht);function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(e,t){return(jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Et=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,o=Ot(r).call(this,e),(t=!o||"object"!==vt(o)&&"function"!=typeof o?wt(n):o).containerRef=null,t.containerRefHandler=function(e){return t.containerRef=e},t.docClickHandler=t.docClickHandler.bind(wt(t)),t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}(r,b["Component"]),e=r,(t=[{key:"docClickHandler",value:function(e){var t=e.target;this.containerRef.contains(t)||(0,this.props.closeEditView)()}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.docClickHandler)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.docClickHandler)}},{key:"render",value:function(){var e=this.props,t=e.project,a=e.closeEditView;return v.a.createElement("div",{ref:this.containerRefHandler},v.a.createElement(bt,{project:t,onSuccess:a},function(e){var t=e.TitleField,n=e.DescriptionField,o=e.AssetsDirField,r=e.onSubmit;return v.a.createElement("form",{onSubmit:r},v.a.createElement("hr",null),v.a.createElement(t,null),v.a.createElement(n,null),v.a.createElement(o,null),v.a.createElement("hr",null),v.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:a},"Close"),v.a.createElement("button",{className:"btn btn-success pull-right",type:"submit",onClick:r},"Save Changes"),v.a.createElement("hr",null))}))}}])&&gt(e.prototype,t),n&&gt(e,n),r}();Et.propTypes={};var Pt=Et;function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function Tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(n),!0).forEach(function(e){kt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xt(e,t){return(xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var At=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,o=Ct(r).call(this,e),(t=!o||"object"!==St(o)&&"function"!=typeof o?Ht(n):o).inputRef=null,t.containerRef=null,t.inputRefHandler=function(e){return t.inputRef=e},t.containerRefHandler=function(e){return t.containerRef=e},t.focusAtInput=t.focusAtInput.bind(Ht(t)),t.onChangeHandler=t.onChangeHandler.bind(Ht(t)),t.handleKeyPress=t.handleKeyPress.bind(Ht(t)),t.saveTodo=t.saveTodo.bind(Ht(t)),t.docClickHandler=t.docClickHandler.bind(Ht(t)),t.state={form:{title:"",story:""},error:!1},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}(r,b["Component"]),e=r,(t=[{key:"docClickHandler",value:function(e){this.containerRef.contains(e.target)||(0,this.props.closeView)()}},{key:"onChangeHandler",value:function(e){var t=e.target,n=t.name,o=t.value;this.setState({form:Tt({},this.state.form,kt({},n,o))})}},{key:"saveTodo",value:function(){var n=this,e=this.props,t=e.addTodo,o=e.editTodo,r=e.closeView,a=e.project,i=e.todo,c=e.parent,s=i?o:t,l=i?r:function(){n.setState({form:{title:"",story:""}},n.focusAtInput)};s({payload:Tt({},this.state.form,{project:a.alias},i?{alias:i.alias}:{},{},c?{parent:c.alias}:{}),onSuccess:l,onError:function(e){var t=e.error;n.setState({error:t.response.data})}})}},{key:"handleKeyPress",value:function(e){var t=this.props.closeView,n=e.target.tagName,o="Enter"==e.key&&("INPUT"==n||"TEXTAREA"==n&&e.ctrlKey);return"Escape"==e.key?t():o?this.saveTodo():void 0}},{key:"focusAtInput",value:function(){this.inputRef.focus()}},{key:"componentDidMount",value:function(){this.focusAtInput(),document.addEventListener("click",this.docClickHandler);var e=this.props.todo;e&&this.setState({form:{title:e.title,story:e.story}})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.docClickHandler)}},{key:"render",value:function(){var e=this.props,t=e.closeView,n=e.todo,o=this.state,r=o.form,a=o.error;return v.a.createElement("div",{className:"add-todo"+(n?" edit-view":""),ref:this.containerRefHandler},v.a.createElement("div",{className:"menu-container left"},v.a.createElement("span",{title:"close",className:"menu",onClick:t},v.a.createElement("i",{className:"fa fa-window-close"})),v.a.createElement("span",{title:"Save",className:"menu",onClick:this.saveTodo},v.a.createElement("i",{className:"fa fa-check"}))),v.a.createElement("input",{type:"text",name:"title",title:"Title",value:r.title,placeholder:"Todo",autoComplete:"off",ref:this.inputRefHandler,onKeyDown:this.handleKeyPress,onChange:this.onChangeHandler}),v.a.createElement(ze,{error:a,name:"title",id:"title"}),v.a.createElement("textarea",{className:"mt-1",placeholder:"Story",name:"story",title:"Story",autoComplete:"off",value:r.story,onKeyDown:this.handleKeyPress,onChange:this.onChangeHandler}))}}])&&_t(e.prototype,t),n&&_t(e,n),r}();At.propTypes={};var It={addTodo:function(s){return function(t){var e,n,o,r,a,i,c=Be({},s.payload,{position:(e=s.payload,n=e.project,o=e.parent,r=Ce.getState().project.prms[n],a=o?r.getTodo({alias:o}).subTask:r.todos,i=1,a.forEach(function(e){e.position>=i&&(i=e.position+1)}),i)});Q.todos.post(c).then(function(e){s.onSuccess&&s.onSuccess(e),t({type:x,payload:{data:e.getData()}})}).catch(function(e){console.error(e),s.onError&&s.onError(e)})}},editTodo:function(n){return function(t){var e=n.payload;Q.todo.patch(e,{alias:e.alias}).then(function(e){t({type:A,payload:{data:e.getData()}}),n.onSuccess(e)}).catch(function(e){console.error(e)})}}},Nt=Object(i.b)(null,It)(At);function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ft(e,t){return(Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ut(){}var qt=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=Vt(r).call(this,e))||"object"!==Mt(o)&&"function"!=typeof o?Lt(n):o).onDragStartHandler=t.onDragStartHandler.bind(Lt(t)),t.onDragOverHandler=t.onDragOverHandler.bind(Lt(t)),t.onDragEnterHandler=t.onDragEnterHandler.bind(Lt(t)),t.onDragLeaveHandler=t.onDragLeaveHandler.bind(Lt(t)),t.onDragEndHandler=t.onDragEndHandler.bind(Lt(t)),t.onDropHandler=t.onDropHandler.bind(Lt(t)),t.dragOverCount=0,t.onDragEnterId=null,t.onDragLeaveId=null,t.dropZoneHandlers={onDragOver:t.onDragOverHandler,onDragEnter:t.onDragEnterHandler,onDragLeave:t.onDragLeaveHandler,onDrop:t.onDropHandler},t.state={dragging:!1,dropZoneEnabled:!1},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}(r,b["Component"]),e=r,(t=[{key:"onDragStartHandler",value:function(e){this.setState({dragging:!0}),this.props.onDragStart(e)}},{key:"onDragOverHandler",value:function(e){e.preventDefault(),this.props.onDragOver(e)}},{key:"onDragEnterHandler",value:function(){var e=this;this.state.dragging||(0==this.dragOverCount&&(null!=this.onDragLeaveId?(clearTimeout(this.onDragLeaveId),this.onDragLeaveId=null):this.onDragEnterId=setTimeout(function(){e.setState({dropZoneEnabled:!0}),e.props.onDragEnter(),e.onDragEnterId=null},this.props.delay)),this.dragOverCount++)}},{key:"onDragLeaveHandler",value:function(){var e=this;this.state.dragging||(this.dragOverCount--,0==this.dragOverCount&&(null!=this.onDragEnterId?(clearTimeout(this.onDragEnterId),this.onDragEnterId=null):this.onDragLeaveId=setTimeout(function(){e.setState({dropZoneEnabled:!1}),e.props.onDragLeave(),e.onDragLeaveId=null},this.props.delay)))}},{key:"onDragEndHandler",value:function(e){this.setState({dragging:!1}),this.props.onDragEnd(e)}},{key:"onDropHandler",value:function(e){this.dragOverCount=0,this.setState({dropZoneEnabled:!1}),this.props.onDrop(e)}},{key:"render",value:function(){var e=this.state,t=e.dropZoneEnabled,n=e.dragging;return this.props.children({dragging:n,dropZoneEnabled:t,dropZoneHandlers:this.dropZoneHandlers,onDragStartHandler:this.onDragStartHandler,onDragOverHandler:this.onDragOverHandler,onDragEnterHandler:this.onDragEnterHandler,onDragLeaveHandler:this.onDragLeaveHandler,onDragEndHandler:this.onDragEndHandler,onDropHandler:this.onDropHandler})}}])&&Rt(e.prototype,t),n&&Rt(e,n),r}();qt.propTypes={onDragStart:s.a.func,onDragOver:s.a.func,onDragEnter:s.a.func,onDragLeave:s.a.func,onDragEnd:s.a.func,onDrop:s.a.func,delay:s.a.number},qt.defaultProps={onDragStart:Ut,onDragOver:Ut,onDragEnter:Ut,onDragLeave:Ut,onDragEnd:Ut,onDrop:Ut,delay:500};var Kt=qt;function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xt(){return(Xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Bt(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Gt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Jt(e){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zt(e,t){return(zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qt=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=Jt(r).call(this,e))||"object"!==Zt(o)&&"function"!=typeof o?Wt(n):o).onDropHandler=t.onDropHandler.bind(Wt(t)),t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zt(e,t)}(r,b["Component"]),e=r,(t=[{key:"onDropHandler",value:function(e){this.props.onDrop(e),this.props.onDropHandler(e)}},{key:"render",value:function(){var e=this.props,t=e.enable,n=(e.onDropHandler,Bt(e,["enable","onDropHandler"]));return t?v.a.createElement("div",Xt({},n,{className:"drop-zone",onDrop:this.onDropHandler})):null}}])&&Gt(e.prototype,t),n&&Gt(e,n),r}();Qt.propTypes={onDropHandler:s.a.func},Qt.defaultProps={onDropHandler:function(){}};var Yt=Qt;function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function tn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?en(Object(n),!0).forEach(function(e){nn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function on(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function rn(e){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function an(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sn(e){var t=e.placeholder,n=e.name,o=e.value,r=e.onChange,a=e.onKeyPress,i=e.refHandler;return v.a.createElement("input",{min:"0",step:"1",type:"number",value:o,ref:i,name:n,title:t,onChange:r,onKeyDown:a,placeholder:t})}sn.defaultProps={refHandler:function(){}};var ln=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=rn(r).call(this,e))||"object"!==$t(o)&&"function"!=typeof o?an(n):o).hourElem=Object(b.createRef)(),t.onChange=t.onChange.bind(an(t)),t.onKeyPress=t.onKeyPress.bind(an(t)),t.state={hour:0,min:0,sec:0,totalSec:0},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}(r,b["Component"]),e=r,(t=[{key:"onKeyPress",value:function(e){"Escape"==e.key&&this.props.onClose&&this.props.onClose(tn({},this.state,{type:"close"})),"Enter"==e.key&&this.props.onSubmit&&this.props.onSubmit(tn({},this.state,{type:"submit"}))}},{key:"onChange",value:function(e){var t,n,o=e.target.name,r=parseFloat(e.target.value),a=(nn(t={hour:this.state.hour,min:this.state.min,sec:this.state.sec},o,r),nn(t,"totalSec",0),t);a.totalSec=3600*a.hour+60*a.min+a.sec,this.setState((nn(n={},o,r),nn(n,"totalSec",a.totalSec),n)),this.props.onChange&&this.props.onChange(tn({},a))}},{key:"format",value:function(e){var t={hour:0,min:0,sec:e,totalSec:0};return t.hour=parseInt(t.sec/3600),t.sec=t.sec-3600*t.hour,t.min=parseInt(t.sec/60),t.sec=t.sec-60*t.min,t.totalSec=3600*t.hour+60*t.min+t.sec,t}},{key:"componentDidMount",value:function(){this.setState(tn({},this.format(this.props.duration))),this.hourElem.current.focus()}},{key:"componentDidUpdate",value:function(e){var t=this.props.duration;e.duration!=t&&this.setState(tn({},this.format(t)))}},{key:"render",value:function(){var e=this.state,t=e.hour,n=e.min,o=e.sec;return v.a.createElement("div",{className:"duration-field"},v.a.createElement(sn,{name:"hour",value:t,refHandler:this.hourElem,onChange:this.onChange,onKeyPress:this.onKeyPress,placeholder:"Hour"}),v.a.createElement(sn,{name:"min",value:n,onChange:this.onChange,onKeyPress:this.onKeyPress,placeholder:"Min"}),v.a.createElement(sn,{name:"sec",value:o,onChange:this.onChange,onKeyPress:this.onKeyPress,placeholder:"Sec"}))}}])&&on(e.prototype,t),n&&on(e,n),r}();function un(e){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function fn(e,t,n){return t&&dn(e.prototype,t),n&&dn(e,n),e}function yn(e,t){return!t||"object"!==un(t)&&"function"!=typeof t?hn(e):t}function hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mn(e){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vn(e,t)}function vn(e,t){return(vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gn=function(){function n(e){var t;return pn(this,n),(t=yn(this,mn(n).call(this,e))).state={time:""},t}return bn(n,b["Component"]),fn(n,[{key:"format",value:function(e){function t(e){e<10&&(n+="0")}var n="",o={day:0,hour:0,min:0,sec:e};return 86399<o.sec&&(o.day=parseInt(o.sec/86400),n+=o.day+"d",o.sec=o.sec-86400*o.day),3599<o.sec&&(o.hour=parseInt(o.sec/3600),o.day&&(n+=" "),t(o.hour),n+=o.hour+":",o.sec=o.sec-3600*o.hour),59<o.sec?(o.min=parseInt(o.sec/60),t(o.min),n+=o.min+":",o.sec=o.sec-60*o.min,t(o.sec),n+=o.sec):o.hour||o.sec?(n+="00:",t(o.sec),n+=o.sec):n+="00:00",n}},{key:"componentDidMount",value:function(){var e=this.props.time;this.setState({time:this.format(e)})}},{key:"componentDidUpdate",value:function(e){e.time!=this.props.time&&this.setState({time:this.format(this.props.time)})}},{key:"render",value:function(){var e=this.state.time;return v.a.createElement("span",{onClick:this.props.onClick},e)}}]),n}();gn.defaultProps={onClick:function(){}};var On=function(){function n(e){var t;return pn(this,n),(t=yn(this,mn(n).call(this,e))).startCountdownInterval=t.startCountdownInterval.bind(hn(t)),t.startCountdown=t.startCountdown.bind(hn(t)),t.stopCountdownInterval=t.stopCountdownInterval.bind(hn(t)),t.stopCountdown=t.stopCountdown.bind(hn(t)),t.toggleEditView=t.toggleEditView.bind(hn(t)),t.onSubmitDurationEdit=t.onSubmitDurationEdit.bind(hn(t)),t.timer=null,t.state={counting:!1,timeSpan:0,busy:!1,edit:!1},t}return bn(n,b["Component"]),fn(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.todo;this.setState({timeSpan:t.time_span},function(){t.wip&&e.startCountdownInterval()})}},{key:"componentWillUnmount",value:function(){this.stopCountdownInterval()}},{key:"componentDidUpdate",value:function(e){var t=this.props.todo;e.todo.time_span!=t.time_span&&this.setState({timeSpan:t.time_span}),e.todo.wip!=t.wip&&(t.wip?this.startCountdownInterval():this.stopCountdownInterval())}},{key:"startCountdownInterval",value:function(){var e=this;this.state.busy||this.state.counting||(this.setState({counting:!0}),this.timer=setInterval(function(){e.setState(function(e){return{timeSpan:e.timeSpan+1}})},1e3))}},{key:"startCountdown",value:function(){this.state.busy||this.state.counting||(this.startCountdownInterval(),this.props.startCountdown(this.props.todo.alias))}},{key:"stopCountdownInterval",value:function(){this.state.busy||this.timer&&this.state.counting&&(this.setState({counting:!1}),clearInterval(this.timer),this.timer=null)}},{key:"stopCountdown",value:function(){this.state.busy||this.timer&&this.state.counting&&(this.stopCountdownInterval(),this.props.stopCountdown(this.props.todo.alias))}},{key:"toggleEditView",value:function(){this.setState({edit:!this.state.edit})}},{key:"onSubmitDurationEdit",value:function(e){this.setState({edit:!1});var t=this.props.todo;this.props.updateTodoData({alias:t.alias,duration:e.totalSec})}},{key:"render",value:function(){var e=this.props.todo,t=this.state,n=t.counting,o=t.timeSpan,r=t.edit,a=e.duration-o;return v.a.createElement(b.Fragment,null,n?v.a.createElement("span",{className:"menu",title:"Stop countdown",onClick:this.stopCountdown},v.a.createElement("i",{className:"fa fa-pause-circle-o"})):v.a.createElement("span",{className:"menu",title:"Start countdown",onClick:this.startCountdown},v.a.createElement("i",{className:"fa fa-play-circle-o"})),v.a.createElement("span",{className:"menu clock duration"},r?v.a.createElement(ln,{onClose:this.toggleEditView,duration:e.duration,onSubmit:this.onSubmitDurationEdit}):v.a.createElement(gn,{time:e.duration,onClick:this.toggleEditView})),0<o&&v.a.createElement(b.Fragment,null,v.a.createElement("span",{className:"menu clock countdown"},a<0&&"+",v.a.createElement(gn,{time:-1<a?a:-1*a}))))}}]),n}();function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jn(){return(jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function En(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Pn(e){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dn(e,t){return(Dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tn=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=Pn(r).call(this,e))||"object"!==wn(o)&&"function"!=typeof o?Sn(n):o).deleteTodo=t.deleteTodo.bind(Sn(t)),t.toggleDetailsViewHandler=t.toggleDetailsViewHandler.bind(Sn(t)),t.toggleEditView=t.toggleEditView.bind(Sn(t)),t.toggleAddView=t.toggleAddView.bind(Sn(t)),t.toggleStatus=t.toggleStatus.bind(Sn(t)),t.onDragStartHandler=t.onDragStartHandler.bind(Sn(t)),t.onDragEndHandler=t.onDragEndHandler.bind(Sn(t)),t.onDropUp=t.onDropUp.bind(Sn(t)),t.onDropDown=t.onDropDown.bind(Sn(t)),t.onDropChild=t.onDropChild.bind(Sn(t)),t.state={addView:!1,editView:!1,detailsView:!0,subMenuExpended:!1},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dn(e,t)}(r,b["Component"]),e=r,(t=[{key:"onDragStartHandler",value:function(){this.props.updateDraggingTodo(this.props.todo)}},{key:"onDragEndHandler",value:function(){this.props.updateDraggingTodo(null)}},{key:"onDropUp",value:function(){this.props.onDropTodo({todoToMove:this.props.draggingTodo,referenceTodo:this.props.todo,direction:Fe})}},{key:"onDropDown",value:function(){this.props.onDropTodo({todoToMove:this.props.draggingTodo,referenceTodo:this.props.todo,direction:Ue})}},{key:"onDropChild",value:function(){this.props.onDropTodo({todoToMove:this.props.draggingTodo,referenceTodo:this.props.todo,direction:qe})}},{key:"deleteTodo",value:function(){if(confirm("Do you want to delete this?")){var e=this.props,t=e.deleteTodo;t(e.todo)}}},{key:"toggleDetailsViewHandler",value:function(){this.setState(function(e){return{detailsView:!e.detailsView}})}},{key:"toggleEditView",value:function(){this.setState(function(e){return{editView:!e.editView}})}},{key:"toggleAddView",value:function(){this.setState(function(e){return{addView:!e.addView}})}},{key:"toggleStatus",value:function(e){this.props.updateTodoData({alias:this.props.todo.alias,done:e.target.checked})}},{key:"render",value:function(){var t=this,e=this.props,n=e.todo,o=e.project,r=e.startCountdown,a=e.stopCountdown,i=e.updateTodoData,c=n.title,s=n.rq,l=n.story,u=n.subTask,p=n.done,d=parseInt(10*n.progress)/10,f=this.state,y=f.addView,h=f.editView,m=f.detailsView;return v.a.createElement(Kt,{onDragStart:this.onDragStartHandler,onDragEnd:this.onDragEndHandler},function(e){return v.a.createElement(b.Fragment,null,v.a.createElement(Yt,jn({},e.dropZoneHandlers,{onDropHandler:t.onDropUp,enable:e.dropZoneEnabled})),!h&&v.a.createElement("div",{draggable:!0,className:"todo-short-info"+(p?" done":"")+(e.dropZoneEnabled?" over":""),onDragEnd:e.onDragEndHandler,onDragStart:e.onDragStartHandler},v.a.createElement("div",{className:"left menu-container"},v.a.createElement("span",{className:"menu"},v.a.createElement("i",{className:"fa fa-angle-double-".concat(m?"down":"right")})),v.a.createElement("span",{className:"menu checkbox"},v.a.createElement("input",{type:"checkbox",checked:p,onChange:t.toggleStatus}))),v.a.createElement("div",{className:"todo-info"},v.a.createElement("div",jn({title:l},e.dropZoneHandlers,{className:"short-view title",onDoubleClick:t.toggleEditView,onClick:t.toggleDetailsViewHandler}),v.a.createElement("span",{className:"text-muted"},"[#",s," (",d,"%)] "),v.a.createElement("span",null,c)),m&&v.a.createElement("div",{className:"story text-muted"},l.split("\n").map(function(e){return v.a.createElement("p",{className:"mb-0",key:e},e)})),v.a.createElement(Yt,jn({},e.dropZoneHandlers,{onDropHandler:t.onDropChild,enable:e.dropZoneEnabled}))),y&&v.a.createElement(Nt,{parent:n,project:o,closeView:t.toggleAddView}),v.a.createElement("div",{className:"right menu-container"},v.a.createElement("span",{className:"menu",onClick:t.toggleAddView},y&&v.a.createElement("i",{title:"Close",className:"fa fa-window-close"})||v.a.createElement("i",{title:"Add Subtask",className:"fa fa-plus"})),v.a.createElement("span",{onClick:t.toggleEditView,className:"menu"},v.a.createElement("i",{title:"Edit",className:"fa fa-edit"})),v.a.createElement("span",{title:"Delete",onClick:t.deleteTodo,className:"menu"},v.a.createElement("i",{className:"fa fa-trash"})),v.a.createElement(On,{todo:n,startCountdown:r,updateTodoData:i,stopCountdown:a}))),h&&v.a.createElement(Nt,{todo:n,project:o,closeView:t.toggleEditView}),u&&0<u.length&&v.a.createElement("div",{className:"todo-list"},v.a.createElement(Hn,{project:o,todoList:u})),v.a.createElement(Yt,jn({},e.dropZoneHandlers,{onDropHandler:t.onDropDown,enable:e.dropZoneEnabled})))})}}])&&En(e.prototype,t),n&&En(e,n),r}();Tn.propTypes={todo:s.a.shape({title:s.a.string.isRequired}).isRequired};function kn(e){var t=e.todoList,n=e.project;return t.map(function(e){return v.a.createElement(Cn,{key:e.alias,todo:e,project:n,updatedAt:e.updatedAt})})}var _n={deleteTodo:function(n){return function(t){Q.todo.delete({alias:n.alias}).then(function(e){t({type:I,payload:{data:n,response:e}})}).catch(function(e){console.error(e)})}},updateDraggingTodo:function(t){return function(e){e({type:N,payload:{data:t}})}},onDropTodo:function(u){return function(t){var e=u.referenceTodo,n=u.todoToMove,o=u.direction,r=Ce.getState().project.prms[n.project];if(e.project==n.project){var a,i,c,s=Ve(Be({},u,{direction:o}));try{i={direction:o,todoToMove:n,referenceTodo:e,targetTodoList:e.parent?r.getTodo({alias:e.parent}).subTask:r.todos},c=i.direction,a=Ze[c](i)}catch(e){if(e instanceof Ke)return;throw e}var l=s?{}:{parent:o==qe?e.alias:e.parent?e.parent:null};Q.todo.patch(Be({alias:n.alias,position:a},l),{alias:n.alias}).then(function(e){t({type:M,payload:{data:e.getData()}})}).catch(function(e){console.error(e)})}}},updateTodoData:function(e){return function(t){Q.todo.patch(e,{alias:e.alias}).then(function(e){t({type:A,payload:{data:e.getData()}})}).catch(function(e){console.error(e)})}},startCountdown:function(t){return function(e){Q.startTodo.get({alias:t})}},stopCountdown:function(t){return function(e){Q.stopTodo.get({alias:t})}}},Cn=Object(i.b)(function(e){return{draggingTodo:e.project.draggingTodo}},_n)(Tn);kn.propTypes={};var Hn=kn;function xn(e){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function An(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function In(e){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mn(e,t){return(Mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Rn=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=In(r).call(this,e))||"object"!==xn(o)&&"function"!=typeof o?Nn(n):o).toggleView=t.toggleView.bind(Nn(t)),t.toggleEditView=t.toggleEditView.bind(Nn(t)),t.deleteHandler=t.deleteHandler.bind(Nn(t)),t.showTodoAddView=t.showTodoAddView.bind(Nn(t)),t.hideTodoAddView=t.hideTodoAddView.bind(Nn(t)),t.exportProject=t.exportProject.bind(Nn(t)),t.importProject=t.importProject.bind(Nn(t)),t.state={showTodoList:!1,editView:!1,todoAddView:!1},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mn(e,t)}(r,b["Component"]),e=r,(t=[{key:"showTodoAddView",value:function(){this.setState({todoAddView:!0})}},{key:"hideTodoAddView",value:function(){this.setState({todoAddView:!1})}},{key:"toggleView",value:function(){var e=this.state.showTodoList,t=this.props,n=t.getTodos,o=t.project;e||n(o),this.setState({showTodoList:!e})}},{key:"toggleEditView",value:function(){this.setState(function(e){return{editView:!e.editView}})}},{key:"exportProject",value:function(){var e=this.props,t=e.exportProject;t(e.project.alias)}},{key:"importProject",value:function(){var e=this.props,t=e.importProject;t(e.project.alias)}},{key:"deleteHandler",value:function(){if(confirm("Do you want to delete this project?")){var e=this.props,t=e.project;(0,e.deleteProject)(t)}}},{key:"render",value:function(){var e=this.state,t=e.showTodoList,n=e.editView,o=e.todoAddView,r=this.props.project,a=r.title,i=r.description,c=r.prm,s=c.todos,l=parseInt(10*c.progress)/10;return v.a.createElement("div",{className:"project-view"},v.a.createElement("div",{className:"left menu-container"},v.a.createElement("span",{className:"menu"},v.a.createElement("i",{className:"fa fa-angle-double-".concat(t?"down":"right")}))),v.a.createElement("div",{className:"short-info"},v.a.createElement("div",{className:"title",onClick:this.toggleView},v.a.createElement("span",{className:"text-muted"},l?"[".concat(l,"%]"):""," "),v.a.createElement("span",{title:i},a)),n&&v.a.createElement(Pt,{project:r,closeEditView:this.toggleEditView}),o&&v.a.createElement(Nt,{project:r,closeView:this.hideTodoAddView}),t&&v.a.createElement(Hn,{project:r,todoList:s})),v.a.createElement("div",{className:"right menu-container"},v.a.createElement("span",{className:"menu",onClick:this.showTodoAddView},o&&v.a.createElement("i",{title:"Close",className:"fa fa-window-close"})||v.a.createElement("i",{title:"Add Todo",className:"fa fa-plus"})),v.a.createElement("span",{className:"menu",onClick:this.toggleEditView},n&&v.a.createElement("i",{title:"Close",className:"fa fa-window-close"})||v.a.createElement("i",{title:"Edit Project",className:"fa fa-edit"})),v.a.createElement("span",{className:"menu",title:"Export Project into assets",onClick:this.exportProject},v.a.createElement("i",{className:"fa fa-download"})),v.a.createElement("span",{className:"menu",title:"Import Project from assets",onClick:this.importProject},v.a.createElement("i",{className:"fa fa-upload"})),v.a.createElement("span",{className:"menu",title:"Delete Project",onClick:this.deleteHandler},v.a.createElement("i",{className:"fa fa-trash"}))))}}])&&An(e.prototype,t),n&&An(e,n),r}();Rn.propTypes={};var Vn=Rn;function Ln(e){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Un(e,t){return!t||"object"!==Ln(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function qn(e){return(qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kn(e,t){return(Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zn=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Un(this,qn(e).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kn(e,t)}(e,b["Component"]),t=e,(n=[{key:"componentDidMount",value:function(){this.props.getProjectList()}},{key:"render",value:function(){var t=this,e=this.props.projectList;return v.a.createElement("div",{id:"todo-list-container"},e.map(function(e){return v.a.createElement(Vn,{key:e.alias,updatedAt:e.prm.updatedAt,project:e,getTodos:t.props.getTodos,deleteProject:t.props.deleteProject,exportProject:t.props.exportProject,importProject:t.props.importProject})}))}}])&&Fn(t.prototype,n),o&&Fn(t,o),e}(),Xn={getTodos:Je,getProjectList:function(){return function(t){Q.projects.get().then(function(e){t({type:C,payload:{data:e.getData()}})}).catch(function(e){console.error(e)})}},deleteProject:function(n){return function(t){Q.project.delete({alias:n.alias}).then(function(e){t({type:k,payload:{data:n,response:e}})}).catch(function(e){console.error(e)})}},exportProject:function(t){return function(e){Q.projectExport.get({alias:t}).catch(function(e){console.error(e)})}},importProject:function(t){return function(e){Q.projectImport.get({alias:t}).then(function(){Je({alias:t})(e)}).catch(function(e){console.error(e)})}}},Bn=Object(i.b)(function(e){return{projectList:e.project.list}},Xn)(Zn);function Gn(e){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jn(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Wn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function zn(e,t){return!t||"object"!==Gn(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Qn(e){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yn(e,t){return(Yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $n(e){var t=e.id;return e.delay,function(r){var e=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),zn(this,Qn(e).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yn(e,t)}(e,b["Component"]),t=e,(n=[{key:"componentDidMount",value:function(){this.props.showModalHandler()}},{key:"render",value:function(){var e=this.props,t=(e.showModalHandler,Jn(e,["showModalHandler"]));return v.a.createElement(r,t)}}])&&Wn(t.prototype,n),o&&Wn(t,o),e}();return to[t]=e}}function eo(e){var t=e.show;return v.a.createElement("div",{className:"modal-backdrop fade"+(t?" show":"")})}var to={};function no(e){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function ro(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ao(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function io(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function co(e){return(co=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function so(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lo(e,t){return(lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var uo=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=co(r).call(this,e))||"object"!==no(o)&&"function"!=typeof o?so(n):o).mountedModalsId=[],t.mountModal=t.mountModal.bind(so(t)),t.showModal=t.showModal.bind(so(t)),t.closeModal=t.closeModal.bind(so(t)),t.updateModals=t.updateModals.bind(so(t)),t.docClickHandler=t.docClickHandler.bind(so(t)),t.state={MountedModals:[]},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lo(e,t)}(r,b["Component"]),e=r,(t=[{key:"updateModals",value:function(e){var t=this.state.MountedModals;this.setState({MountedModals:ao(t)},e||function(){})}},{key:"docClickHandler",value:function(e){var t=this.state.MountedModals;if(0!=t.length){var n=t[t.length-1];if(n.ref)if(n.show&&n.fadeEffect)e.target==n.ref&&n.closeModalHandler()}}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.docClickHandler)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.docClickHandler)}},{key:"showModal",value:function(e){var o=this,r=e.id;return function(){var e=o.state.MountedModals,t=o.props.delay;if(o.mountedModalsId.includes(r)){var n=e.find(function(e){return e.id==r});n.show=!0,o.updateModals(function(){setTimeout(function(){n.fadeEffect=!0,o.updateModals()},t)})}}}},{key:"closeModal",value:function(e){var o=this,r=e.id;return function(){var e=o.state.MountedModals,t=o.props.delay;if(o.mountedModalsId.includes(r)){var n=e.find(function(e){return e.id==r});n.fadeEffect=!1,o.updateModals(function(){setTimeout(function(){n.show=!1,o.updateModals(function(){o.unMountModal({id:r})})},t)})}}}},{key:"unMountModal",value:function(e){var t=e.id,n=this.state.MountedModals;this.setState({MountedModals:n.filter(function(e){return e.id!=t})}),this.mountedModalsId.splice(this.mountedModalsId.indexOf(t),1)}},{key:"mountModal",value:function(e){var t=this.state.MountedModals,n=e.id,o=e.targetModal;if(!this.mountedModalsId.includes(n)){this.mountedModalsId.push(n);var r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oo(Object(n),!0).forEach(function(e){ro(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oo(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e,{Modal:to[o],show:!1,fadeEffect:!1,ref:null,refHandler:function(e){return r.ref=e},showModalHandler:this.showModal({id:n}),closeModalHandler:this.closeModal({id:n})});this.setState({MountedModals:[].concat(ao(t),[r])})}}},{key:"componentDidUpdate",value:function(e){var t=this.props.modals.activeModal;e.modals.activeModal!=t&&t&&this.mountModal(t)}},{key:"render",value:function(){var e=this.state.MountedModals,l=this.props.modals;return e.map(function(e){var t=e.id,n=e.backDrop,o=e.refHandler,r=e.show,a=e.fadeEffect,i=e.closeModalHandler,c=e.showModalHandler,s=e.Modal;return v.a.createElement(b.Fragment,{key:t},v.a.createElement(s,{modal:l.data[t],modalShow:r,modalFadeIn:a,modalClose:i,modalRefHandler:o,showModalHandler:c}),n&&v.a.createElement(eo,{show:r}))})}}])&&io(e.prototype,t),n&&io(e,n),r}();uo.propTypes={},uo.defaultProps={delay:200};var po=Object(i.b)(function(e){return{modals:e.modals}})(uo);function fo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function yo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ho(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mo(e){var s=e.modalClose;return v.a.createElement(bt,{onSuccess:s},function(e){var t=e.loading,n=e.done,o=e.error,r=e.onSubmit,a=e.TitleField,i=e.DescriptionField,c=e.AssetsDirField;return v.a.createElement("div",{className:"modal-dialog",role:"document"},v.a.createElement("div",{className:"modal-content"},v.a.createElement("div",{className:"modal-header"},v.a.createElement("h5",{className:"modal-title"},"Add Project"),v.a.createElement("button",{type:"button",className:"close",onClick:s,"aria-label":"Close"},v.a.createElement("span",{"aria-hidden":"true"},"×"))),v.a.createElement("div",{className:"modal-body"},v.a.createElement("form",{onSubmit:r},v.a.createElement(a,null),v.a.createElement(i,null),v.a.createElement(c,null))),v.a.createElement("div",{className:"modal-footer"},v.a.createElement("button",{type:"button",onClick:s,className:"btn btn-secondary mr-auto","data-dismiss":"modal"},"Close"),v.a.createElement("button",{type:"button",className:"btn ".concat(o?"btn-danger":"btn-primary"),onClick:r},t&&v.a.createElement("span",null,v.a.createElement("span",{role:"status","aria-hidden":"true",className:"spinner-border spinner-border-sm"})," Saving...")||n&&v.a.createElement("span",null,v.a.createElement("i",{className:"fa fa-check","aria-hidden":"true"})," Done")||o&&v.a.createElement("span",null,"Try again")||v.a.createElement("span",null,"Save changes")))))})}var bo=function(e){var t=e.id,n=ho(e,["id"]);return function(r){return $n(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fo(Object(n),!0).forEach(function(e){yo(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fo(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({id:t},n))(function(e){var t=e.modalFadeIn,n=e.modalShow,o=e.modalRefHandler;return v.a.createElement("div",{className:"modal fade"+(t?" show":"")+(n?" d-block":""),ref:o},v.a.createElement(r,e))})}};mo.propTypes={};function vo(){return v.a.createElement(b.Fragment,null,v.a.createElement(Bn,null),v.a.createElement(u,null),v.a.createElement(po,null))}bo({id:"project"})(mo);vo.propTypes={};var go=vo;!function(e){var t=document.querySelector('head link[rel="shortcut icon"]'),n="".concat("/static/").concat(e);if(t)t.href=n;else{var o=document.createElement("link");o.rel="shortcut icon",o.type="image/x-icon",o.href=n,document.head.appendChild(o)}}("favicon.ico"),a.a.render(v.a.createElement(function(){return v.a.createElement(i.a,{store:_e},v.a.createElement(go,null))},null),document.getElementById("app"))},1:function(e,t,n){e.exports=n("./app/index.js")}},[[1,0,6,1,16,20,12,2,14,15,13,19,21,23,4,5,9,10,11,18,17]]]);