(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"./app/Styles/app.scss":function(e,t,n){},"./app/index.js":function(e,t,n){"use strict";n.r(t);function r(e){var t=e.turnOnModal;return b.a.createElement("button",{title:"Add Project",id:"add-project-button","data-target-modal":"project","data-back-drop":"true",onClick:t},b.a.createElement("div",{className:"content"},"+"))}var m=n("./node_modules/react/index.js"),b=n.n(m),o=n("./node_modules/react-dom/index.js"),a=n.n(o),i=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/prop-types/index.js"),s=n.n(c),S=(n("./app/Styles/app.scss"),"ADD-PROJECT"),k="DELETE-PROJECT",_="UPDATE-PROJECT",C="GET-PROJECT-LIST",p="MODAL-TURN-ON",H="GET-TODO-LIST",x="ADD-TODO",A="UPDATE-TODO",N="DELETE-TODO",I="DRAGGING-TODO",M="MOVE-TODO";r.propTypes={};var l={turnOnModal:function(t){return function(e){e({type:p,payload:{data:t}})}}},u=Object(i.b)(null,l)(r),d=n("./node_modules/lodash/get.js"),f=n.n(d),y=n("./node_modules/lodash/isFunction.js"),h=n.n(y),g=n("./node_modules/lodash/isString.js"),v=n.n(g),O=n("./node_modules/lodash/isArray.js"),w=n.n(O);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function E(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function P(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach(function(e){V(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e){var r=e.config,o=e.method,t=e.oldPayload,a=e.dispatch,n=e.isInvalidReduxRequest,i=E(e,["config","method","oldPayload","dispatch","isInvalidReduxRequest"]),c=i.response,s=R({data:function(e){var t=e.oldPayload,n=e.response,r=f()(n,"data.results",f()(n,"data",!1));if(!w()(r))return r;if(!f()(t,"hasMore",!1))return r;var o=f()(t,"data",!1);return w()(o)?[].concat(P(o),P(r)):r}({oldPayload:t,response:c}),loading:!1,error:!1,hasMore:Boolean(f()(c,"data.next",!1)),loadMore:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var t=e.payload,n=e.method,r=e.config,o=void 0===r?{}:r,a=e.response,i=e.dispatch,c=e.loadMoreArgs;if(t.hasMore){var s=a.data.next,l=B(R({},o,{BASE_URL:"",url:s,type:n,isUrlString:!0,isUrlFunc:!1}));return G(R({},o,{apiType:n,config:o,axiosRequest:l,oldPayload:t,oldDispatch:i})).apply(void 0,P(c))}}({payload:s,method:o,config:r,response:c,dispatch:a,loadMoreArgs:t})},getData:function(e,t){return e?f()(s.data,e,t):s.data},is:{success:null,error:null,forbidden:null}},i);return s.is.success=!s.loading&&!s.error&&c&&c.status>=Z&&c.status<K,s.is.error=!s.loading&&!c&&s.error&&s.error.response,s.is.forbidden=s.is.error&&s.error.response.status==X,n?s:a?void a(s):s}function F(e,t,n){var r=0<arguments.length&&void 0!==e?e:[],o=1<arguments.length?t:void 0,a=2<arguments.length?n:void 0,i=r[o];r[o]=r[a],r[a]=i}function U(e,t,n,r){var o,a=0<arguments.length&&void 0!==e?e:[],i=1<arguments.length?t:void 0,c=2<arguments.length?n:void 0,s=!(3<arguments.length&&void 0!==r)||r;return 1<a.length&&(i<(o=function(e,t,n,r){for(var o=0<arguments.length&&void 0!==e?e:[],a=1<arguments.length?t:void 0,i=2<arguments.length?n:void 0,c=!(3<arguments.length&&void 0!==r)||r,s=o[Math.floor((i+a)/2)].position,l=a,u=i;l<=u;){for(;c?o[l].position<s:o[l].position>s;)l++;for(;c?o[u].position>s:o[u].position<s;)u--;l<=u&&(F(o,l,u),l++,u--)}return l}(a,i,c,s))-1&&U(a,i,o-1,s),o<c&&U(a,o,c,s)),a}function q(e,t){var n=0<arguments.length&&void 0!==e?e:[],r=!(1<arguments.length&&void 0!==t)||t;1<n.length&&U(n,0,n.length-1,r)}var Z=200,K=300,X=403,B=function(e){var g=e.BASE_URL,v=e.url,O=e.type,w=e.axios,j=e.isUrlString,E=e.isUrlFunc,P=e.reservedParams;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o,a,i,c,s,l=T((r=t,o=0,a=null,["post","patch","put"].includes(O)&&(a=0,o=1),[r[a],r[o]]),2),u=l[0],d=l[1],p=null!=u,f=d||{},y=u||{},h=[],m=g,b={params:E?(i=f,c=P,s={},Object.keys(i).forEach(function(e){c.includes(e)||(s[e]=i[e])}),s):f};return j&&(m+=v),E&&(m+=v(f)),h.push(m),p&&h.push(y),h.push(b),w[O].apply(w,h)}},G=function(e){var t=e.API,n=e.isInvalidReduxRequest,r=e.oldDispatch,o=e.apiType,a=e.ACTION_LIST,i=e.config,c=e.axiosRequest,s=e.oldPayload,l=t[o];null==c&&(c=l);function u(e){var t=j({},e);return L(R({config:i,oldPayload:s,method:o,isInvalidReduxRequest:n},t))}function d(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return new Promise(function(t,n){c.apply(void 0,r).then(function(e){t(u({response:e}))}).catch(function(e){n(u({error:e}))})})}if(n)return d;function p(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];return function(n,r){function t(e){var t=j({},e);return u(R({type:f,dispatch:n,store:r()},t))}t({loading:!0}),c.apply(void 0,o).then(function(e){t({response:e})}).catch(function(e){t({error:e})})}}var f=a[o];return r?function(){return p.apply(void 0,arguments)(r)}:Object.assign(p,{reduxAction:p,axiosRequest:d,actionType:f})},J=function(e){var l=e.axios,t=e.urlPrefix,u=void 0===t?"":t,d={};return{registerApi:function(e){var t,n,r=e.url,o=e.actionType,a=void 0===o?"":o,i=e.stateName,c=void 0===i?"":i,s={axios:l,urlPrefix:u,RootReducer:d,url:r,actionType:a,stateName:c,BASE_URL:u,isUrlString:v()(r),isUrlFunc:h()(r),reservedParams:[],isInvalidReduxRequest:""==a||""==c,ACTION_LIST:{get:"".concat(a,"_GET"),delete:"".concat(a,"_DELETE"),post:"".concat(a,"_POST"),patch:"".concat(a,"_PATCH"),put:"".concat(a,"_PUT")},API:{},ACTION:{get:function(e){},delete:function(e){},post:function(e,t){},patch:function(e,t){},put:function(e,t){}}};return s.isUrlFunc&&(s.reservedParams=(t=s.url,n=[],t(new Proxy({},{get:function(e,t){return n.push(t),e[t]}})),n)),s.API={get:B(R({},s,{type:"get"})),delete:B(R({},s,{type:"delete"})),post:B(R({},s,{type:"post"})),patch:B(R({},s,{type:"patch"})),put:B(R({},s,{type:"put"}))},s.ACTION={get:G(R({},s,{config:s,apiType:"get"})),delete:G(R({},s,{config:s,apiType:"delete"})),post:G(R({},s,{config:s,apiType:"post"})),patch:G(R({},s,{config:s,apiType:"patch"})),put:G(R({},s,{config:s,apiType:"put"}))},s.isInvalidReduxRequest?R({},s.ACTION):(d[c]=function(e){var n=(0<arguments.length&&void 0!==e?e:{}).ACTION_LIST,r=L({});return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case n.get:return t;default:return e}}}(R({},s)),R({},s.ACTION,{stateName:s.stateName,getState:function(e){return e[s.stateName]}}))},getReducer:function(){return d}}},W=n("./node_modules/axios/index.js"),z=J({urlPrefix:"/api/v1",axios:n.n(W).a.create({baseURL:"/",xsrfHeaderName:"X-CSRFToken",xsrfCookieName:"csrftoken"})}).registerApi,Q={projects:z({url:"/project"}),project:z({url:function(e){var t=e.alias;return"/project/".concat(t)}}),projectExport:z({url:function(e){var t=e.alias;return"/project/export/".concat(t)}}),projectImport:z({url:function(e){var t=e.alias;return"/project/import/".concat(t)}}),todos:z({url:"/todo"}),todo:z({url:function(e){var t=e.alias;return"/todo/".concat(t)}}),startTodo:z({url:function(e){var t=e.alias;return"/todo/start/".concat(t)}}),stopTodo:z({url:function(e){var t=e.alias;return"/todo/stop/".concat(t)}})},Y=n("./node_modules/redux-thunk/es/index.js"),$=n("./node_modules/redux/es/redux.js");function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}function se(e){var t=0<arguments.length&&void 0!==e?e:de;return function(){function e(){return ae(this,e),te(this,ne(e).apply(this,arguments))}return re(e,t),ce(e,[{key:"updateProgress",value:function(e,r){var o=r.progress=0;e.forEach(function(e){var t=e.duration;o+=t}),e.forEach(function(e){var t=e.progress,n=e.duration;r.progress+=n/o*t})}},{key:"updateRootProgress",value:function(){this.updateProgress(this.todos,this)}},{key:"updateParentProgress",value:function(e){var t=this.todosHash[e];this.updateProgress(t.subTask,t),t.parent?this.updateParentProgress(t.parent):this.updateRootProgress()}},{key:"addToProgress",value:function(e){e.done?e.progress=100:this.updateProgress(e.subTask,e),e.parent?this.updateParentProgress(e.parent):this.updateRootProgress()}}]),e}()}function le(e){var t=0<arguments.length&&void 0!==e?e:de;return function(){function e(){return ae(this,e),te(this,ne(e).apply(this,arguments))}return re(e,t),ce(e,[{key:"sort",value:function(e){q(e,this.ascOrder)}}]),e}()}var ue=function(){function e(){ae(this,e),this.todos=[],this.todosHash={},this.updatedAt=(new Date).getTime(),this.progress=0,this.ascOrder=!0}return ce(e,[{key:"updateProgress",value:function(){}},{key:"updateRootProgress",value:function(){}},{key:"updateParentProgress",value:function(){}},{key:"addToProgress",value:function(){}},{key:"sort",value:function(){}}]),e}(),de=function(){function e(){return ae(this,e),te(this,ne(e).apply(this,arguments))}return re(e,ue),ce(e,[{key:"sortAll",value:function(){var n=this;this.updatedAt=(new Date).getTime(),function t(e){n.sort(e),e.forEach(function(e){e.updatedAt=n.updatedAt,t(e.subTask)})}(this.todos)}},{key:"setUpdatedAt",value:function(e,t){var n=(0<arguments.length&&void 0!==e?e:{}).alias,r=(1<arguments.length?t:void 0)||{updatedAt:(new Date).getTime()},o=this.todosHash[n];if(o){Object.assign(o,r);var a=this.todosHash[o.parent];a&&a.alias?this.setUpdatedAt(a,r):this.updatedAt=r.updatedAt}else this.updatedAt=r.updatedAt}},{key:"getTodo",value:function(e){var t=e.alias;return this.todosHash[t]}},{key:"addTodo",value:function(e){var t=Object.assign({},e),n=this.todosHash[t.alias];if(n?Object.assign(t,n):this.todosHash[t.alias]=t,t.subTask||(t.subTask=[]),t.parent){var r=this.todosHash[t.parent];r||(r={subTask:[]},this.todosHash[t.parent]=r),r.subTask.push(t),this.sort(r.subTask)}else this.todos.push(t),this.sort(this.todos);this.addToProgress(t),this.setUpdatedAt(t)}},{key:"deleteTodo",value:function(e){var t,n=e.alias,r=this.todosHash[n];if(r.parent){var o=this.todosHash[r.parent];t=o.subTask.findIndex(function(e){return e.alias==n}),o.subTask.splice(t,1),this.updateParentProgress(r.parent),this.setUpdatedAt({alias:r.parent})}else t=this.todos.findIndex(function(e){return e.alias==n}),this.todos.splice(t,1),this.updateRootProgress(),this.setUpdatedAt();delete this.todosHash[n]}},{key:"updateTodo",value:function(e){var t=this.todosHash[e.alias],n=Object.assign({},t,e);this.deleteTodo({alias:n.alias}),this.addTodo(n)}}]),e}(),pe=function(){function e(){return ae(this,e),te(this,ne(e).apply(this,arguments))}return re(e,le(se(de))),e}();function fe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ye(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function he(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ye(Object(n),!0).forEach(function(e){me(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(){var e=new pe;return e.ascOrder=!1,e}function ge(e,t){var n=t.payload.data;return e.prms[n.project].updateTodo(n),he({},e,{list:fe(e.list)})}var ve={prms:{},list:[],draggingTodo:null},Oe={list:[],hash:{},idList:[]},we=n("./node_modules/shortid/index.js");function je(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Pe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(n),!0).forEach(function(e){Te(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var De,Se={data:{},order:[],activeModal:null},ke=Object($.c)({project:function(e,t){var n,r,o,a,i,c,s,l,u,d,p,f,y,h,m,b,g,v,O,w,j,E,P,T=0<arguments.length&&void 0!==e?e:ve,D=1<arguments.length?t:void 0;switch(D.type){case C:return w=T,j=D.payload.data,E={},P=j.map(function(e){var t=be();return he({},e,{prm:E[e.alias]=t})}),he({},w,{list:fe(P),prms:E});case S:return b=T,g=D.payload.data,v=be(),O=he({},g,{prm:v}),he({},b,{prms:he({},b.prm,me({},g.alias,v)),list:[].concat(fe(b.list),[O])});case _:return y=T,h=D.payload.data,m=y.list.findIndex(function(e){return e.alias==h.alias}),y.list[m]=he({},y.list[m],{},h),he({},y,{list:fe(y.list)});case k:return function(e,t){var n=t.payload.data;delete e.prms[n.alias];var r=e.list.filter(function(e){return e.alias!=n.alias});return he({},e,{prms:he({},e.prms),list:fe(r)})}(T,D);case H:return i=T,c=D.payload,s=c.data,l=c.project,u=i.prms,d=i.list,p=be(),f=d.findIndex(function(e){return e.alias=l.alias}),d[f]=he({},l,{prm:p}),s.forEach(function(e){p.addTodo(e)}),he({},i,{prms:he({},u,me({},l.alias,p)),list:fe(d)});case x:return o=T,a=D.payload.data,o.prms[a.project].addTodo(a),he({},o,{list:fe(o.list)});case N:return n=T,r=D.payload.data,n.prms[r.project].deleteTodo(r),he({},n,{list:fe(n.list)});case A:return ge(T,D);case I:return he({},T,{draggingTodo:D.payload.data});case M:return ge(T,D);default:return T}},todo:function(e,t){var n=0<arguments.length&&void 0!==e?e:Oe;return(1<arguments.length?t:void 0).type,n},modals:function(e,t){var n,r,o,a,i,c,s,l,u=0<arguments.length&&void 0!==e?e:Se,d=1<arguments.length?t:void 0;switch(d.type){case p:return n=u,r=d.payload.data.currentTarget,o=r.dataset,a=r.data,i=o.targetModal,c=o.backDrop,s=Object(we.generate)(),l={targetModal:i,id:s,backDrop:Boolean("true"==c),data:a||null},Pe({},n,{activeModal:l,data:Pe({},n.data,Te({},s,l)),order:[].concat(je(n.order),[s])});default:return u}}}),_e=window.__REDUX_DEVTOOLS_EXTENSION__?Object($.e)(ke,Object($.d)(Object($.a)(Y.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())):Object($.e)(ke,Object($.a)(Y.a)),Ce=_e;function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ae(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Ne(e){var r="function"==typeof Map?new Map:void 0;return(Ne=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return Ie(e,arguments,Re(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Me(n,e)})(e)}function Ie(e,t,n){return(Ie=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Me(o,n.prototype),o}).apply(null,arguments)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ve(e){var t=e.todoToMove,n=e.referenceTodo;return e.direction!=qe&&t.parent==n.parent}function Le(e){var t=e.referenceTodo,n=e.todoToMove,r=e.targetTodoList,o=r.findIndex(function(e){return e.alias==n.alias}),a=t.position,i=r.findIndex(function(e){return e.alias==t.alias}),c=i-1,s=r[c],l=(s||{position:null}).position,u=i+1,d=r[u];return{nextTodo:d,nextTodoIndex:u,nextTodoPosition:(d||{position:null}).position,todoIndex:o,refrenceTodoIndex:i,refrenceTodoPosition:a,previousTodo:s,previousTodoIndex:c,previousTodoPosition:l}}var Fe="up",Ue="down",qe="child",Ze=function(){function r(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n="at index '".concat(e,"'");return(t=Ae(this,Re(r).call(this,n))).position=e,t.name="SamePositionException",t.message=n,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(r,Ne(Error)),r}(),Ke=(xe(De={},Fe,function(e){var t=Le(e),n=t.previousTodoPosition,r=t.todoIndex,o=t.previousTodoIndex,a=t.refrenceTodoPosition;if(Ve(e)&&-1!=r&&r==o)throw new Ze(r);return null==n?a/2:(a+n)/2}),xe(De,Ue,function(e){var t=Le(e),n=t.nextTodoPosition,r=t.todoIndex,o=t.nextTodoIndex,a=t.refrenceTodoPosition;if(Ve(e)&&-1!=r&&r==o)throw new Ze(r);return null==n?a+1:(a+n)/2}),xe(De,qe,function(){return 1}),De);function Xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Be(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xe(Object(n),!0).forEach(function(e){Ge(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Je(n){return function(t){Q.todos.get({project:n.alias}).then(function(e){t({type:H,payload:{project:n,data:e.getData()}})}).catch(function(e){console.error(e)})}}function We(e){var n=e.id,t=e.error,r=e.name,o=e.helpText;return t&&t[r]&&t[r].map(function(e,t){return b.a.createElement("small",{id:"".concat(n,"-help-").concat(t),key:e,className:"form-text text-danger"},e)})||o&&b.a.createElement("small",{id:"".concat(n,"-help"),className:"form-text text-muted"},o)||null}We.propTypes={error:s.a.any,helpText:s.a.string,id:s.a.string.isRequired,name:s.a.string.isRequired};var ze=We;function Qe(){return(Qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ye(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function $e(e){e.error,e.helpText;var t=e.id,n=e.label,r=Ye(e,["error","helpText","id","label"]);return b.a.createElement("div",{className:"form-group"},b.a.createElement("label",{htmlFor:t},n),b.a.createElement("input",Qe({id:t,className:"form-control","aria-describedby":"".concat(t,"-help")},r)),b.a.createElement(ze,e))}$e.defaultProps={type:"text"},$e.propTypes={name:s.a.string.isRequired,id:s.a.string.isRequired,type:s.a.string,title:s.a.string,placeholder:s.a.string,value:s.a.any,onChange:s.a.func,helpText:s.a.string};var et=$e;function tt(){return(tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function nt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function rt(e){var t=e.id,n=e.label,r=(e.error,e.helpText,nt(e,["id","label","error","helpText"]));return b.a.createElement("div",{className:"form-group"},b.a.createElement("label",{htmlFor:t},n),b.a.createElement("textarea",tt({className:"form-control",id:t},r)),b.a.createElement(ze,e))}rt.propTypes={id:s.a.string.isRequired,label:s.a.string.isRequired};var ot=rt;function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(){return(it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(n),!0).forEach(function(e){lt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yt(){}var ht=function(){function o(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,(t=!(r=dt(o).call(this,e))||"object"!==at(r)&&"function"!=typeof r?pt(n):r).changeHandler=t.changeHandler.bind(pt(t)),t.submitHandler=t.submitHandler.bind(pt(t)),t.titleField=t.titleField.bind(pt(t)),t.descriptionField=t.descriptionField.bind(pt(t)),t.assetsDirField=t.assetsDirField.bind(pt(t)),t.state={loading:!1,done:!1,error:!1,form:{title:"",description:"",assets_dir:""}},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(o,m["Component"]),e=o,(t=[{key:"componentDidMount",value:function(){var e=this.props.project;e&&this.setState({form:{title:e.title,description:e.description,assets_dir:e.assets_dir}})}},{key:"changeHandler",value:function(e){var t=e.target,n=t.name,r=t.value;this.setState({form:st({},this.state.form,lt({},n,r))})}},{key:"titleField",value:function(e){var t=this.state,n=t.form,r=t.error;return b.a.createElement(et,it({},e,{type:"text",name:"title",label:"Title",error:r,id:"project-title",value:n.title,placeholder:"Project title",title:"Prject Name",helpText:"Project name/title",onChange:this.changeHandler}))}},{key:"descriptionField",value:function(e){var t=this.state,n=t.form,r=t.error;return b.a.createElement(ot,it({},e,{error:r,id:"project-story",label:"Description",name:"description",placeholder:"Project description",title:"Project Description",value:n.description,onChange:this.changeHandler,helpText:"A little description about this project."}))}},{key:"assetsDirField",value:function(e){var t=this.state,n=t.form,r=t.error;return b.a.createElement(et,it({},e,{type:"text",name:"assets_dir",label:"Assets Directory",error:r,id:"project-assets",value:n.assets_dir,placeholder:"Assets Directory",title:"Assets Directory",helpText:"Path of a directory for assets",onChange:this.changeHandler}))}},{key:"submitHandler",value:function(e){var t=this;e.preventDefault();var n=this.props,r=n.onSuccess,o=n.onError,a=n.addProject,i=n.updateProject,c=n.project;(c?i:a)({getPayload:function(){return t.state.form},oldPayload:function(){return c},onSuccess:function(){t.setState({loading:!1,done:!0},r)},onError:function(e){t.setState({error:f()(e,"error.response.data",!0),loading:!1},o)}}),this.setState({loading:!0,error:!1})}},{key:"render",value:function(){return this.props.children(st({},this.state,{onChange:this.changeHandler,onSubmit:this.submitHandler,TitleField:this.titleField,DescriptionField:this.descriptionField,AssetsDirField:this.assetsDirField}))}}])&&ut(e.prototype,t),n&&ut(e,n),o}();ht.defaultProps={onSuccess:yt,onError:yt},ht.propTypes={onSuccess:s.a.func,onError:s.a.func};var mt={addProject:function(n){return function(t){Q.projects.post(n.getPayload()).then(function(e){n.onSuccess(e),t({type:S,payload:{data:e.getData()}})}).catch(function(e){console.error(e),n.onError(e)})}},updateProject:function(n){return function(t){Q.project.put(n.getPayload(),{alias:n.oldPayload().alias}).then(function(e){n.onSuccess(e),t({type:_,payload:{data:e.getData(),oldData:n.oldPayload()}})}).catch(function(e){console.error(e),n.onError(e)})}}},bt=Object(i.b)(null,mt)(ht);function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(e,t){return(jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Et=function(){function o(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,r=Ot(o).call(this,e),(t=!r||"object"!==gt(r)&&"function"!=typeof r?wt(n):r).containerRef=null,t.containerRefHandler=function(e){return t.containerRef=e},t.docClickHandler=t.docClickHandler.bind(wt(t)),t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}(o,m["Component"]),e=o,(t=[{key:"docClickHandler",value:function(e){var t=e.target;this.containerRef.contains(t)||(0,this.props.closeEditView)()}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.docClickHandler)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.docClickHandler)}},{key:"render",value:function(){var e=this.props,t=e.project,a=e.closeEditView;return b.a.createElement("div",{ref:this.containerRefHandler},b.a.createElement(bt,{project:t,onSuccess:a},function(e){var t=e.TitleField,n=e.DescriptionField,r=e.AssetsDirField,o=e.onSubmit;return b.a.createElement("form",{onSubmit:o},b.a.createElement("hr",null),b.a.createElement(t,null),b.a.createElement(n,null),b.a.createElement(r,null),b.a.createElement("hr",null),b.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:a},"Close"),b.a.createElement("button",{className:"btn btn-success pull-right",type:"submit",onClick:o},"Save Changes"),b.a.createElement("hr",null))}))}}])&&vt(e.prototype,t),n&&vt(e,n),o}();Et.propTypes={};var Pt=Et;function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function St(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(n),!0).forEach(function(e){kt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xt(e,t){return(xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var At=function(){function o(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,r=Ct(o).call(this,e),(t=!r||"object"!==Tt(r)&&"function"!=typeof r?Ht(n):r).inputRef=null,t.containerRef=null,t.inputRefHandler=function(e){return t.inputRef=e},t.containerRefHandler=function(e){return t.containerRef=e},t.focusAtInput=t.focusAtInput.bind(Ht(t)),t.onChangeHandler=t.onChangeHandler.bind(Ht(t)),t.handleKeyPress=t.handleKeyPress.bind(Ht(t)),t.saveTodo=t.saveTodo.bind(Ht(t)),t.docClickHandler=t.docClickHandler.bind(Ht(t)),t.state={form:{title:"",story:""},error:!1},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}(o,m["Component"]),e=o,(t=[{key:"docClickHandler",value:function(e){this.containerRef.contains(e.target)||(0,this.props.closeView)()}},{key:"onChangeHandler",value:function(e){var t=e.target,n=t.name,r=t.value;this.setState({form:St({},this.state.form,kt({},n,r))})}},{key:"saveTodo",value:function(){var n=this,e=this.props,t=e.addTodo,r=e.editTodo,o=e.closeView,a=e.project,i=e.todo,c=e.parent,s=i?r:t,l=i?o:function(){n.setState({form:{title:"",story:""}},n.focusAtInput)};s({payload:St({},this.state.form,{project:a.alias},i?{alias:i.alias}:{},{},c?{parent:c.alias}:{}),onSuccess:l,onError:function(e){var t=e.error;n.setState({error:t.response.data})}})}},{key:"handleKeyPress",value:function(e){var t=this.props.closeView,n=e.target.tagName,r="Enter"==e.key&&("INPUT"==n||"TEXTAREA"==n&&e.ctrlKey);return"Escape"==e.key?t():r?this.saveTodo():void 0}},{key:"focusAtInput",value:function(){this.inputRef.focus()}},{key:"componentDidMount",value:function(){this.focusAtInput(),document.addEventListener("click",this.docClickHandler);var e=this.props.todo;e&&this.setState({form:{title:e.title,story:e.story}})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.docClickHandler)}},{key:"render",value:function(){var e=this.props,t=e.closeView,n=e.todo,r=this.state,o=r.form,a=r.error;return b.a.createElement("div",{className:"add-todo"+(n?" edit-view":""),ref:this.containerRefHandler},b.a.createElement("div",{className:"menu-container left"},b.a.createElement("span",{title:"close",className:"menu",onClick:t},b.a.createElement("i",{className:"fa fa-window-close"})),b.a.createElement("span",{title:"Save",className:"menu",onClick:this.saveTodo},b.a.createElement("i",{className:"fa fa-check"}))),b.a.createElement("input",{type:"text",name:"title",title:"Title",value:o.title,placeholder:"Todo",autoComplete:"off",ref:this.inputRefHandler,onKeyDown:this.handleKeyPress,onChange:this.onChangeHandler}),b.a.createElement(ze,{error:a,name:"title",id:"title"}),b.a.createElement("textarea",{className:"mt-1",placeholder:"Story",name:"story",title:"Story",autoComplete:"off",value:o.story,onKeyDown:this.handleKeyPress,onChange:this.onChangeHandler}))}}])&&_t(e.prototype,t),n&&_t(e,n),o}();At.propTypes={};var Nt={addTodo:function(s){return function(t){var e,n,r,o,a,i,c=Be({},s.payload,{position:(e=s.payload,n=e.project,r=e.parent,o=Ce.getState().project.prms[n],a=r?o.getTodo({alias:r}).subTask:o.todos,i=1,a.forEach(function(e){e.position>=i&&(i=e.position+1)}),i)});Q.todos.post(c).then(function(e){s.onSuccess&&s.onSuccess(e),t({type:x,payload:{data:e.getData()}})}).catch(function(e){console.error(e),s.onError&&s.onError(e)})}},editTodo:function(n){return function(t){var e=n.payload;Q.todo.patch(e,{alias:e.alias}).then(function(e){t({type:A,payload:{data:e.getData()}}),n.onSuccess(e)}).catch(function(e){console.error(e)})}}},It=Object(i.b)(null,Nt)(At);function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ft(e,t){return(Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ut(){}var qt=function(){function o(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,(t=!(r=Vt(o).call(this,e))||"object"!==Mt(r)&&"function"!=typeof r?Lt(n):r).onDragStartHandler=t.onDragStartHandler.bind(Lt(t)),t.onDragOverHandler=t.onDragOverHandler.bind(Lt(t)),t.onDragEnterHandler=t.onDragEnterHandler.bind(Lt(t)),t.onDragLeaveHandler=t.onDragLeaveHandler.bind(Lt(t)),t.onDragEndHandler=t.onDragEndHandler.bind(Lt(t)),t.onDropHandler=t.onDropHandler.bind(Lt(t)),t.dragOverCount=0,t.onDragEnterId=null,t.onDragLeaveId=null,t.dropZoneHandlers={onDragOver:t.onDragOverHandler,onDragEnter:t.onDragEnterHandler,onDragLeave:t.onDragLeaveHandler,onDrop:t.onDropHandler},t.state={dragging:!1,dropZoneEnabled:!1},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}(o,m["Component"]),e=o,(t=[{key:"onDragStartHandler",value:function(e){this.setState({dragging:!0}),this.props.onDragStart(e)}},{key:"onDragOverHandler",value:function(e){e.preventDefault(),this.props.onDragOver(e)}},{key:"onDragEnterHandler",value:function(){var e=this;this.state.dragging||(0==this.dragOverCount&&(null!=this.onDragLeaveId?(clearTimeout(this.onDragLeaveId),this.onDragLeaveId=null):this.onDragEnterId=setTimeout(function(){e.setState({dropZoneEnabled:!0}),e.props.onDragEnter(),e.onDragEnterId=null},this.props.delay)),this.dragOverCount++)}},{key:"onDragLeaveHandler",value:function(){var e=this;this.state.dragging||(this.dragOverCount--,0==this.dragOverCount&&(null!=this.onDragEnterId?(clearTimeout(this.onDragEnterId),this.onDragEnterId=null):this.onDragLeaveId=setTimeout(function(){e.setState({dropZoneEnabled:!1}),e.props.onDragLeave(),e.onDragLeaveId=null},this.props.delay)))}},{key:"onDragEndHandler",value:function(e){this.setState({dragging:!1}),this.props.onDragEnd(e)}},{key:"onDropHandler",value:function(e){this.dragOverCount=0,this.setState({dropZoneEnabled:!1}),this.props.onDrop(e)}},{key:"render",value:function(){var e=this.state,t=e.dropZoneEnabled,n=e.dragging;return this.props.children({dragging:n,dropZoneEnabled:t,dropZoneHandlers:this.dropZoneHandlers,onDragStartHandler:this.onDragStartHandler,onDragOverHandler:this.onDragOverHandler,onDragEnterHandler:this.onDragEnterHandler,onDragLeaveHandler:this.onDragLeaveHandler,onDragEndHandler:this.onDragEndHandler,onDropHandler:this.onDropHandler})}}])&&Rt(e.prototype,t),n&&Rt(e,n),o}();qt.propTypes={onDragStart:s.a.func,onDragOver:s.a.func,onDragEnter:s.a.func,onDragLeave:s.a.func,onDragEnd:s.a.func,onDrop:s.a.func,delay:s.a.number},qt.defaultProps={onDragStart:Ut,onDragOver:Ut,onDragEnter:Ut,onDragLeave:Ut,onDragEnd:Ut,onDrop:Ut,delay:500};var Zt=qt;function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xt(){return(Xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Bt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zt(e,t){return(zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qt=function(){function o(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,(t=!(r=Jt(o).call(this,e))||"object"!==Kt(r)&&"function"!=typeof r?Wt(n):r).onDropHandler=t.onDropHandler.bind(Wt(t)),t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zt(e,t)}(o,m["Component"]),e=o,(t=[{key:"onDropHandler",value:function(e){this.props.onDrop(e),this.props.onDropHandler(e)}},{key:"render",value:function(){var e=this.props,t=e.enable,n=(e.onDropHandler,Bt(e,["enable","onDropHandler"]));return t?b.a.createElement("div",Xt({},n,{className:"drop-zone",onDrop:this.onDropHandler})):null}}])&&Gt(e.prototype,t),n&&Gt(e,n),o}();Qt.propTypes={onDropHandler:s.a.func},Qt.defaultProps={onDropHandler:function(){}};var Yt=Qt;function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nn(e,t,n){return t&&tn(e.prototype,t),n&&tn(e,n),e}function rn(e,t){return!t||"object"!==$t(t)&&"function"!=typeof t?on(e):t}function on(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function an(e){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)}function sn(e,t){return(sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ln=function(){function n(e){var t;return en(this,n),(t=rn(this,an(n).call(this,e))).state={time:""},t}return cn(n,m["Component"]),nn(n,[{key:"format",value:function(e){function t(e){e<10&&(n+="0")}var n="",r={day:0,hour:0,min:0,sec:e};return 86399<r.sec&&(r.day=parseInt(r.sec/86400),n+=r.day+"d",r.sec=r.sec-86400*r.day),3599<r.sec&&(r.hour=parseInt(r.sec/3600),r.day&&(n+=" "),t(r.hour),n+=r.hour+":",r.sec=r.sec-3600*r.hour),59<r.sec?(r.min=parseInt(r.sec/60),t(r.min),n+=r.min+":",r.sec=r.sec-60*r.min,t(r.sec),n+=r.sec):r.hour||r.sec?(n+="00:",t(r.sec),n+=r.sec):n+="00:00",n}},{key:"componentDidMount",value:function(){var e=this.props.time;this.setState({time:this.format(e)})}},{key:"componentDidUpdate",value:function(e){e.time!=this.props.time&&this.setState({time:this.format(this.props.time)})}},{key:"render",value:function(){return this.state.time}}]),n}(),un=function(){function n(e){var t;return en(this,n),(t=rn(this,an(n).call(this,e))).startCountdownInterval=t.startCountdownInterval.bind(on(t)),t.startCountdown=t.startCountdown.bind(on(t)),t.stopCountdownInterval=t.stopCountdownInterval.bind(on(t)),t.stopCountdown=t.stopCountdown.bind(on(t)),t.timer=null,t.state={counting:!1,timeSpan:0,busy:!1},t}return cn(n,m["Component"]),nn(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.todo;this.setState({timeSpan:t.time_span},function(){t.wip&&e.startCountdownInterval()})}},{key:"componentWillUnmount",value:function(){this.stopCountdownInterval()}},{key:"componentDidUpdate",value:function(e){var t=this.props.todo;e.todo.time_span!=t.time_span&&this.setState({timeSpan:t.time_span}),e.todo.wip!=t.wip&&(t.wip?this.startCountdownInterval():this.stopCountdownInterval())}},{key:"startCountdownInterval",value:function(){var e=this;this.state.busy||this.state.counting||(this.setState({counting:!0}),this.timer=setInterval(function(){e.setState(function(e){return{timeSpan:e.timeSpan+1}})},1e3))}},{key:"startCountdown",value:function(){this.state.busy||this.state.counting||(this.startCountdownInterval(),this.props.startCountdown(this.props.todo.alias))}},{key:"stopCountdownInterval",value:function(){this.state.busy||this.timer&&this.state.counting&&(this.setState({counting:!1}),clearInterval(this.timer),this.timer=null)}},{key:"stopCountdown",value:function(){this.state.busy||this.timer&&this.state.counting&&(this.stopCountdownInterval(),this.props.stopCountdown(this.props.todo.alias))}},{key:"render",value:function(){var e=this.props.todo,t=this.state,n=t.counting,r=t.timeSpan,o=e.duration-r;return b.a.createElement(m.Fragment,null,n?b.a.createElement("span",{className:"menu",title:"Stop countdown",onClick:this.stopCountdown},b.a.createElement("i",{className:"fa fa-pause-circle-o"})):b.a.createElement("span",{className:"menu",title:"Start countdown",onClick:this.startCountdown},b.a.createElement("i",{className:"fa fa-play-circle-o"})),b.a.createElement("span",{className:"menu clock duration"},b.a.createElement(ln,{time:e.duration})),0<r&&b.a.createElement(m.Fragment,null,b.a.createElement("span",{className:"menu clock countdown"},o<0&&"+",b.a.createElement(ln,{time:-1<o?o:-1*o}))))}}]),n}();function dn(e){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pn(){return(pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yn(e){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bn=function(){function o(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,(t=!(r=yn(o).call(this,e))||"object"!==dn(r)&&"function"!=typeof r?hn(n):r).deleteTodo=t.deleteTodo.bind(hn(t)),t.toggleDetailsViewHandler=t.toggleDetailsViewHandler.bind(hn(t)),t.toggleEditView=t.toggleEditView.bind(hn(t)),t.toggleAddView=t.toggleAddView.bind(hn(t)),t.toggleStatus=t.toggleStatus.bind(hn(t)),t.onDragStartHandler=t.onDragStartHandler.bind(hn(t)),t.onDragEndHandler=t.onDragEndHandler.bind(hn(t)),t.onDropUp=t.onDropUp.bind(hn(t)),t.onDropDown=t.onDropDown.bind(hn(t)),t.onDropChild=t.onDropChild.bind(hn(t)),t.state={addView:!1,editView:!1,detailsView:!0,subMenuExpended:!1},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(o,m["Component"]),e=o,(t=[{key:"onDragStartHandler",value:function(){this.props.updateDraggingTodo(this.props.todo)}},{key:"onDragEndHandler",value:function(){this.props.updateDraggingTodo(null)}},{key:"onDropUp",value:function(){this.props.onDropTodo({todoToMove:this.props.draggingTodo,referenceTodo:this.props.todo,direction:Fe})}},{key:"onDropDown",value:function(){this.props.onDropTodo({todoToMove:this.props.draggingTodo,referenceTodo:this.props.todo,direction:Ue})}},{key:"onDropChild",value:function(){this.props.onDropTodo({todoToMove:this.props.draggingTodo,referenceTodo:this.props.todo,direction:qe})}},{key:"deleteTodo",value:function(){if(confirm("Do you want to delete this?")){var e=this.props,t=e.deleteTodo;t(e.todo)}}},{key:"toggleDetailsViewHandler",value:function(){this.setState(function(e){return{detailsView:!e.detailsView}})}},{key:"toggleEditView",value:function(){this.setState(function(e){return{editView:!e.editView}})}},{key:"toggleAddView",value:function(){this.setState(function(e){return{addView:!e.addView}})}},{key:"toggleStatus",value:function(e){this.props.toggleTodoStatus({alias:this.props.todo.alias,done:e.target.checked})}},{key:"render",value:function(){var t=this,e=this.props,n=e.todo,r=e.project,o=e.startCountdown,a=e.stopCountdown,i=n.title,c=n.rq,s=n.story,l=n.subTask,u=n.done,d=parseInt(10*n.progress)/10,p=this.state,f=p.addView,y=p.editView,h=p.detailsView;p.subMenuExpended;return b.a.createElement(Zt,{onDragStart:this.onDragStartHandler,onDragEnd:this.onDragEndHandler},function(e){return b.a.createElement(m.Fragment,null,b.a.createElement(Yt,pn({},e.dropZoneHandlers,{onDropHandler:t.onDropUp,enable:e.dropZoneEnabled})),!y&&b.a.createElement("div",{draggable:!0,className:"todo-short-info"+(u?" done":"")+(e.dropZoneEnabled?" over":""),onDragEnd:e.onDragEndHandler,onDragStart:e.onDragStartHandler},b.a.createElement("div",{className:"left menu-container"},b.a.createElement("span",{className:"menu"},b.a.createElement("i",{className:"fa fa-angle-double-".concat(h?"down":"right")})),b.a.createElement("span",{className:"menu checkbox"},b.a.createElement("input",{type:"checkbox",checked:u,onChange:t.toggleStatus}))),b.a.createElement("div",{className:"todo-info"},b.a.createElement("div",pn({title:s},e.dropZoneHandlers,{className:"short-view title",onDoubleClick:t.toggleEditView,onClick:t.toggleDetailsViewHandler}),b.a.createElement("span",{className:"text-muted"},"[#",c," (",d,"%)] "),b.a.createElement("span",null,i)),h&&b.a.createElement("div",{className:"story text-muted"},s.split("\n").map(function(e){return b.a.createElement("p",{className:"mb-0",key:e},e)})),b.a.createElement(Yt,pn({},e.dropZoneHandlers,{onDropHandler:t.onDropChild,enable:e.dropZoneEnabled}))),f&&b.a.createElement(It,{parent:n,project:r,closeView:t.toggleAddView}),b.a.createElement("div",{className:"right menu-container"},b.a.createElement("span",{className:"menu",onClick:t.toggleAddView},f&&b.a.createElement("i",{title:"Close",className:"fa fa-window-close"})||b.a.createElement("i",{title:"Add Subtask",className:"fa fa-plus"})),b.a.createElement("span",{onClick:t.toggleEditView,className:"menu"},b.a.createElement("i",{title:"Edit",className:"fa fa-edit"})),b.a.createElement("span",{title:"Delete",onClick:t.deleteTodo,className:"menu"},b.a.createElement("i",{className:"fa fa-trash"})),b.a.createElement(un,{todo:n,startCountdown:o,stopCountdown:a}))),y&&b.a.createElement(It,{todo:n,project:r,closeView:t.toggleEditView}),l&&0<l.length&&b.a.createElement("div",{className:"todo-list"},b.a.createElement(wn,{project:r,todoList:l})),b.a.createElement(Yt,pn({},e.dropZoneHandlers,{onDropHandler:t.onDropDown,enable:e.dropZoneEnabled})))})}}])&&fn(e.prototype,t),n&&fn(e,n),o}();bn.propTypes={todo:s.a.shape({title:s.a.string.isRequired}).isRequired};function gn(e){var t=e.todoList,n=e.project;return t.map(function(e){return b.a.createElement(On,{key:e.alias,todo:e,project:n,updatedAt:e.updatedAt})})}var vn={deleteTodo:function(n){return function(t){Q.todo.delete({alias:n.alias}).then(function(e){t({type:N,payload:{data:n,response:e}})}).catch(function(e){console.error(e)})}},updateDraggingTodo:function(t){return function(e){e({type:I,payload:{data:t}})}},onDropTodo:function(u){return function(t){var e=u.referenceTodo,n=u.todoToMove,r=u.direction,o=Ce.getState().project.prms[n.project];if(e.project==n.project){var a,i,c,s=Ve(Be({},u,{direction:r}));try{i={direction:r,todoToMove:n,referenceTodo:e,targetTodoList:e.parent?o.getTodo({alias:e.parent}).subTask:o.todos},c=i.direction,a=Ke[c](i)}catch(e){if(e instanceof Ze)return;throw e}var l=s?{}:{parent:r==qe?e.alias:e.parent?e.parent:null};Q.todo.patch(Be({alias:n.alias,position:a},l),{alias:n.alias}).then(function(e){t({type:M,payload:{data:e.getData()}})}).catch(function(e){console.error(e)})}}},toggleTodoStatus:function(e){return function(t){Q.todo.patch(e,{alias:e.alias}).then(function(e){t({type:A,payload:{data:e.getData()}})}).catch(function(e){console.error(e)})}},startCountdown:function(t){return function(e){Q.startTodo.get({alias:t})}},stopCountdown:function(t){return function(e){Q.stopTodo.get({alias:t})}}},On=Object(i.b)(function(e){return{draggingTodo:e.project.draggingTodo}},vn)(bn);gn.propTypes={};var wn=gn;function jn(e){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function En(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pn(e){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dn(e,t){return(Dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Sn=function(){function o(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,(t=!(r=Pn(o).call(this,e))||"object"!==jn(r)&&"function"!=typeof r?Tn(n):r).toggleView=t.toggleView.bind(Tn(t)),t.toggleEditView=t.toggleEditView.bind(Tn(t)),t.deleteHandler=t.deleteHandler.bind(Tn(t)),t.showTodoAddView=t.showTodoAddView.bind(Tn(t)),t.hideTodoAddView=t.hideTodoAddView.bind(Tn(t)),t.exportProject=t.exportProject.bind(Tn(t)),t.importProject=t.importProject.bind(Tn(t)),t.state={showTodoList:!1,editView:!1,todoAddView:!1},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dn(e,t)}(o,m["Component"]),e=o,(t=[{key:"showTodoAddView",value:function(){this.setState({todoAddView:!0})}},{key:"hideTodoAddView",value:function(){this.setState({todoAddView:!1})}},{key:"toggleView",value:function(){var e=this.state.showTodoList,t=this.props,n=t.getTodos,r=t.project;e||n(r),this.setState({showTodoList:!e})}},{key:"toggleEditView",value:function(){this.setState(function(e){return{editView:!e.editView}})}},{key:"exportProject",value:function(){var e=this.props,t=e.exportProject;t(e.project.alias)}},{key:"importProject",value:function(){var e=this.props,t=e.importProject;t(e.project.alias)}},{key:"deleteHandler",value:function(){if(confirm("Do you want to delete this project?")){var e=this.props,t=e.project;(0,e.deleteProject)(t)}}},{key:"render",value:function(){var e=this.state,t=e.showTodoList,n=e.editView,r=e.todoAddView,o=this.props.project,a=o.title,i=o.description,c=o.prm,s=c.todos,l=parseInt(10*c.progress)/10;return b.a.createElement("div",{className:"project-view"},b.a.createElement("div",{className:"left menu-container"},b.a.createElement("span",{className:"menu"},b.a.createElement("i",{className:"fa fa-angle-double-".concat(t?"down":"right")}))),b.a.createElement("div",{className:"short-info"},b.a.createElement("div",{className:"title",onClick:this.toggleView},b.a.createElement("span",{className:"text-muted"},l?"[".concat(l,"%]"):""," "),b.a.createElement("span",{title:i},a)),n&&b.a.createElement(Pt,{project:o,closeEditView:this.toggleEditView}),r&&b.a.createElement(It,{project:o,closeView:this.hideTodoAddView}),t&&b.a.createElement(wn,{project:o,todoList:s})),b.a.createElement("div",{className:"right menu-container"},b.a.createElement("span",{className:"menu",onClick:this.showTodoAddView},r&&b.a.createElement("i",{title:"Close",className:"fa fa-window-close"})||b.a.createElement("i",{title:"Add Todo",className:"fa fa-plus"})),b.a.createElement("span",{className:"menu",onClick:this.toggleEditView},n&&b.a.createElement("i",{title:"Close",className:"fa fa-window-close"})||b.a.createElement("i",{title:"Edit Project",className:"fa fa-edit"})),b.a.createElement("span",{className:"menu",title:"Export Project into assets",onClick:this.exportProject},b.a.createElement("i",{className:"fa fa-download"})),b.a.createElement("span",{className:"menu",title:"Import Project from assets",onClick:this.importProject},b.a.createElement("i",{className:"fa fa-upload"})),b.a.createElement("span",{className:"menu",title:"Delete Project",onClick:this.deleteHandler},b.a.createElement("i",{className:"fa fa-trash"}))))}}])&&En(e.prototype,t),n&&En(e,n),o}();Sn.propTypes={};var kn=Sn;function _n(e){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hn(e,t){return!t||"object"!==_n(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function xn(e){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function An(e,t){return(An=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Nn=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Hn(this,xn(e).apply(this,arguments))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&An(e,t)}(e,m["Component"]),t=e,(n=[{key:"componentDidMount",value:function(){this.props.getProjectList()}},{key:"render",value:function(){var t=this,e=this.props.projectList;return b.a.createElement("div",{id:"todo-list-container"},e.map(function(e){return b.a.createElement(kn,{key:e.alias,updatedAt:e.prm.updatedAt,project:e,getTodos:t.props.getTodos,deleteProject:t.props.deleteProject,exportProject:t.props.exportProject,importProject:t.props.importProject})}))}}])&&Cn(t.prototype,n),r&&Cn(t,r),e}(),In={getTodos:Je,getProjectList:function(){return function(t){Q.projects.get().then(function(e){t({type:C,payload:{data:e.getData()}})}).catch(function(e){console.error(e)})}},deleteProject:function(n){return function(t){Q.project.delete({alias:n.alias}).then(function(e){t({type:k,payload:{data:n,response:e}})}).catch(function(e){console.error(e)})}},exportProject:function(t){return function(e){Q.projectExport.get({alias:t}).catch(function(e){console.error(e)})}},importProject:function(t){return function(e){Q.projectImport.get({alias:t}).then(function(){Je({alias:t})(e)}).catch(function(e){console.error(e)})}}},Mn=Object(i.b)(function(e){return{projectList:e.project.list}},In)(Nn);function Rn(e){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fn(e,t){return!t||"object"!==Rn(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Un(e){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qn(e,t){return(qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zn(e){var t=e.id;return e.delay,function(o){var e=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Fn(this,Un(e).apply(this,arguments))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qn(e,t)}(e,m["Component"]),t=e,(n=[{key:"componentDidMount",value:function(){this.props.showModalHandler()}},{key:"render",value:function(){var e=this.props,t=(e.showModalHandler,Vn(e,["showModalHandler"]));return b.a.createElement(o,t)}}])&&Ln(t.prototype,n),r&&Ln(t,r),e}();return Xn[t]=e}}function Kn(e){var t=e.show;return b.a.createElement("div",{className:"modal-backdrop fade"+(t?" show":"")})}var Xn={};function Bn(e){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qn(e){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $n(e,t){return($n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var er=function(){function o(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,(t=!(r=Qn(o).call(this,e))||"object"!==Bn(r)&&"function"!=typeof r?Yn(n):r).mountedModalsId=[],t.mountModal=t.mountModal.bind(Yn(t)),t.showModal=t.showModal.bind(Yn(t)),t.closeModal=t.closeModal.bind(Yn(t)),t.updateModals=t.updateModals.bind(Yn(t)),t.docClickHandler=t.docClickHandler.bind(Yn(t)),t.state={MountedModals:[]},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$n(e,t)}(o,m["Component"]),e=o,(t=[{key:"updateModals",value:function(e){var t=this.state.MountedModals;this.setState({MountedModals:Wn(t)},e||function(){})}},{key:"docClickHandler",value:function(e){var t=this.state.MountedModals;if(0!=t.length){var n=t[t.length-1];if(n.ref)if(n.show&&n.fadeEffect)e.target==n.ref&&n.closeModalHandler()}}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.docClickHandler)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.docClickHandler)}},{key:"showModal",value:function(e){var r=this,o=e.id;return function(){var e=r.state.MountedModals,t=r.props.delay;if(r.mountedModalsId.includes(o)){var n=e.find(function(e){return e.id==o});n.show=!0,r.updateModals(function(){setTimeout(function(){n.fadeEffect=!0,r.updateModals()},t)})}}}},{key:"closeModal",value:function(e){var r=this,o=e.id;return function(){var e=r.state.MountedModals,t=r.props.delay;if(r.mountedModalsId.includes(o)){var n=e.find(function(e){return e.id==o});n.fadeEffect=!1,r.updateModals(function(){setTimeout(function(){n.show=!1,r.updateModals(function(){r.unMountModal({id:o})})},t)})}}}},{key:"unMountModal",value:function(e){var t=e.id,n=this.state.MountedModals;this.setState({MountedModals:n.filter(function(e){return e.id!=t})}),this.mountedModalsId.splice(this.mountedModalsId.indexOf(t),1)}},{key:"mountModal",value:function(e){var t=this.state.MountedModals,n=e.id,r=e.targetModal;if(!this.mountedModalsId.includes(n)){this.mountedModalsId.push(n);var o=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gn(Object(n),!0).forEach(function(e){Jn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e,{Modal:Xn[r],show:!1,fadeEffect:!1,ref:null,refHandler:function(e){return o.ref=e},showModalHandler:this.showModal({id:n}),closeModalHandler:this.closeModal({id:n})});this.setState({MountedModals:[].concat(Wn(t),[o])})}}},{key:"componentDidUpdate",value:function(e){var t=this.props.modals.activeModal;e.modals.activeModal!=t&&t&&this.mountModal(t)}},{key:"render",value:function(){var e=this.state.MountedModals,l=this.props.modals;return e.map(function(e){var t=e.id,n=e.backDrop,r=e.refHandler,o=e.show,a=e.fadeEffect,i=e.closeModalHandler,c=e.showModalHandler,s=e.Modal;return b.a.createElement(m.Fragment,{key:t},b.a.createElement(s,{modal:l.data[t],modalShow:o,modalFadeIn:a,modalClose:i,modalRefHandler:r,showModalHandler:c}),n&&b.a.createElement(Kn,{show:o}))})}}])&&zn(e.prototype,t),n&&zn(e,n),o}();er.propTypes={},er.defaultProps={delay:200};var tr=Object(i.b)(function(e){return{modals:e.modals}})(er);function nr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function or(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ar(e){var s=e.modalClose;return b.a.createElement(bt,{onSuccess:s},function(e){var t=e.loading,n=e.done,r=e.error,o=e.onSubmit,a=e.TitleField,i=e.DescriptionField,c=e.AssetsDirField;return b.a.createElement("div",{className:"modal-dialog",role:"document"},b.a.createElement("div",{className:"modal-content"},b.a.createElement("div",{className:"modal-header"},b.a.createElement("h5",{className:"modal-title"},"Add Project"),b.a.createElement("button",{type:"button",className:"close",onClick:s,"aria-label":"Close"},b.a.createElement("span",{"aria-hidden":"true"},""))),b.a.createElement("div",{className:"modal-body"},b.a.createElement("form",{onSubmit:o},b.a.createElement(a,null),b.a.createElement(i,null),b.a.createElement(c,null))),b.a.createElement("div",{className:"modal-footer"},b.a.createElement("button",{type:"button",onClick:s,className:"btn btn-secondary mr-auto","data-dismiss":"modal"},"Close"),b.a.createElement("button",{type:"button",className:"btn ".concat(r?"btn-danger":"btn-primary"),onClick:o},t&&b.a.createElement("span",null,b.a.createElement("span",{role:"status","aria-hidden":"true",className:"spinner-border spinner-border-sm"})," Saving...")||n&&b.a.createElement("span",null,b.a.createElement("i",{className:"fa fa-check","aria-hidden":"true"})," Done")||r&&b.a.createElement("span",null,"Try again")||b.a.createElement("span",null,"Save changes")))))})}var ir=function(e){var t=e.id,n=or(e,["id"]);return function(o){return Zn(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(n),!0).forEach(function(e){rr(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({id:t},n))(function(e){var t=e.modalFadeIn,n=e.modalShow,r=e.modalRefHandler;return b.a.createElement("div",{className:"modal fade"+(t?" show":"")+(n?" d-block":""),ref:r},b.a.createElement(o,e))})}};ar.propTypes={};function cr(){return b.a.createElement(m.Fragment,null,b.a.createElement(Mn,null),b.a.createElement(u,null),b.a.createElement(tr,null))}ir({id:"project"})(ar);cr.propTypes={};var sr=cr;!function(e){var t=document.querySelector('head link[rel="shortcut icon"]'),n="".concat("/static/").concat(e);if(t)t.href=n;else{var r=document.createElement("link");r.rel="shortcut icon",r.type="image/x-icon",r.href=n,document.head.appendChild(r)}}("favicon.ico"),a.a.render(b.a.createElement(function(){return b.a.createElement(i.a,{store:_e},b.a.createElement(sr,null))},null),document.getElementById("app"))},1:function(e,t,n){e.exports=n("./app/index.js")}},[[1,0,6,1,16,20,12,2,14,15,13,19,21,23,4,5,9,10,11,18,17]]]);