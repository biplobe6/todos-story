(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"./app/Styles/app.scss":function(e,t,n){},"./app/index.js":function(e,t,n){"use strict";n.r(t);function o(e){var t=e.turnOnModal;return g.a.createElement("button",{title:"Add Project",id:"add-project-button","data-target-modal":"project","data-back-drop":"true",onClick:t},g.a.createElement("div",{className:"content"},"+"))}var b=n("./node_modules/react/index.js"),g=n.n(b),r=n("./node_modules/react-dom/index.js"),a=n.n(r),i=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/prop-types/index.js"),s=n.n(c),T=(n("./app/Styles/app.scss"),"ADD-PROJECT"),k="DELETE-PROJECT",_="UPDATE-PROJECT",C="GET-PROJECT-LIST",d="MODAL-TURN-ON",H="GET-TODO-LIST",x="ADD-TODO",A="UPDATE-TODO",N="DELETE-TODO",I="DRAGGING-TODO",M="MOVE-TODO";o.propTypes={};var l={turnOnModal:function(t){return function(e){e({type:d,payload:{data:t}})}}},u=Object(i.b)(null,l)(o),p=n("./node_modules/lodash/get.js"),f=n.n(p),y=n("./node_modules/lodash/isFunction.js"),h=n.n(y),m=n("./node_modules/lodash/isString.js"),v=n.n(m),O=n("./node_modules/lodash/isArray.js"),w=n.n(O);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(o=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function E(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function P(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach(function(e){V(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e){var o=e.config,r=e.method,t=e.oldPayload,a=e.dispatch,n=e.isInvalidReduxRequest,i=E(e,["config","method","oldPayload","dispatch","isInvalidReduxRequest"]),c=i.response,s=R({data:function(e){var t=e.oldPayload,n=e.response,o=f()(n,"data.results",f()(n,"data",!1));if(!w()(o))return o;if(!f()(t,"hasMore",!1))return o;var r=f()(t,"data",!1);return w()(r)?[].concat(P(r),P(o)):o}({oldPayload:t,response:c}),loading:!1,error:!1,hasMore:Boolean(f()(c,"data.next",!1)),loadMore:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var t=e.payload,n=e.method,o=e.config,r=void 0===o?{}:o,a=e.response,i=e.dispatch,c=e.loadMoreArgs;if(t.hasMore){var s=a.data.next,l=B(R({},r,{BASE_URL:"",url:s,type:n,isUrlString:!0,isUrlFunc:!1}));return G(R({},r,{apiType:n,config:r,axiosRequest:l,oldPayload:t,oldDispatch:i})).apply(void 0,P(c))}}({payload:s,method:r,config:o,response:c,dispatch:a,loadMoreArgs:t})},getData:function(e,t){return e?f()(s.data,e,t):s.data},is:{success:null,error:null,forbidden:null}},i);return s.is.success=!s.loading&&!s.error&&c&&c.status>=K&&c.status<Z,s.is.error=!s.loading&&!c&&s.error&&s.error.response,s.is.forbidden=s.is.error&&s.error.response.status==X,n?s:a?void a(s):s}function F(e,t,n){var o=0<arguments.length&&void 0!==e?e:[],r=1<arguments.length?t:void 0,a=2<arguments.length?n:void 0,i=o[r];o[r]=o[a],o[a]=i}function U(e,t,n,o){var r,a=0<arguments.length&&void 0!==e?e:[],i=1<arguments.length?t:void 0,c=2<arguments.length?n:void 0,s=!(3<arguments.length&&void 0!==o)||o;return 1<a.length&&(i<(r=function(e,t,n,o){for(var r=0<arguments.length&&void 0!==e?e:[],a=1<arguments.length?t:void 0,i=2<arguments.length?n:void 0,c=!(3<arguments.length&&void 0!==o)||o,s=r[Math.floor((i+a)/2)].position,l=a,u=i;l<=u;){for(;c?r[l].position<s:r[l].position>s;)l++;for(;c?r[u].position>s:r[u].position<s;)u--;l<=u&&(F(r,l,u),l++,u--)}return l}(a,i,c,s))-1&&U(a,i,r-1,s),r<c&&U(a,r,c,s)),a}function q(e,t){var n=0<arguments.length&&void 0!==e?e:[],o=!(1<arguments.length&&void 0!==t)||t;1<n.length&&U(n,0,n.length-1,o)}var K=200,Z=300,X=403,B=function(e){var g=e.BASE_URL,v=e.url,O=e.type,w=e.axios,j=e.isUrlString,E=e.isUrlFunc,P=e.reservedParams;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o,r,a,i,c,s,l=S((o=t,r=0,a=null,["post","patch","put"].includes(O)&&(a=0,r=1),[o[a],o[r]]),2),u=l[0],p=l[1],d=null!=u,f=p||{},y=u||{},h=[],m=g,b={params:E?(i=f,c=P,s={},Object.keys(i).forEach(function(e){c.includes(e)||(s[e]=i[e])}),s):f};return j&&(m+=v),E&&(m+=v(f)),h.push(m),d&&h.push(y),h.push(b),w[O].apply(w,h)}},G=function(e){var t=e.API,n=e.isInvalidReduxRequest,o=e.oldDispatch,r=e.apiType,a=e.ACTION_LIST,i=e.config,c=e.axiosRequest,s=e.oldPayload,l=t[r];null==c&&(c=l);function u(e){var t=j({},e);return L(R({config:i,oldPayload:s,method:r,isInvalidReduxRequest:n},t))}function p(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];return new Promise(function(t,n){c.apply(void 0,o).then(function(e){t(u({response:e}))}).catch(function(e){n(u({error:e}))})})}if(n)return p;function d(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(n,o){function t(e){var t=j({},e);return u(R({type:f,dispatch:n,store:o()},t))}t({loading:!0}),c.apply(void 0,r).then(function(e){t({response:e})}).catch(function(e){t({error:e})})}}var f=a[r];return o?function(){return d.apply(void 0,arguments)(o)}:Object.assign(d,{reduxAction:d,axiosRequest:p,actionType:f})},J=function(e){var l=e.axios,t=e.urlPrefix,u=void 0===t?"":t,p={};return{registerApi:function(e){var t,n,o=e.url,r=e.actionType,a=void 0===r?"":r,i=e.stateName,c=void 0===i?"":i,s={axios:l,urlPrefix:u,RootReducer:p,url:o,actionType:a,stateName:c,BASE_URL:u,isUrlString:v()(o),isUrlFunc:h()(o),reservedParams:[],isInvalidReduxRequest:""==a||""==c,ACTION_LIST:{get:"".concat(a,"_GET"),delete:"".concat(a,"_DELETE"),post:"".concat(a,"_POST"),patch:"".concat(a,"_PATCH"),put:"".concat(a,"_PUT")},API:{},ACTION:{get:function(e){},delete:function(e){},post:function(e,t){},patch:function(e,t){},put:function(e,t){}}};return s.isUrlFunc&&(s.reservedParams=(t=s.url,n=[],t(new Proxy({},{get:function(e,t){return n.push(t),e[t]}})),n)),s.API={get:B(R({},s,{type:"get"})),delete:B(R({},s,{type:"delete"})),post:B(R({},s,{type:"post"})),patch:B(R({},s,{type:"patch"})),put:B(R({},s,{type:"put"}))},s.ACTION={get:G(R({},s,{config:s,apiType:"get"})),delete:G(R({},s,{config:s,apiType:"delete"})),post:G(R({},s,{config:s,apiType:"post"})),patch:G(R({},s,{config:s,apiType:"patch"})),put:G(R({},s,{config:s,apiType:"put"}))},s.isInvalidReduxRequest?R({},s.ACTION):(p[c]=function(e){var n=(0<arguments.length&&void 0!==e?e:{}).ACTION_LIST,o=L({});return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:o,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case n.get:return t;default:return e}}}(R({},s)),R({},s.ACTION,{stateName:s.stateName,getState:function(e){return e[s.stateName]}}))},getReducer:function(){return p}}},W=n("./node_modules/axios/index.js"),z=J({urlPrefix:"/api/v1",axios:n.n(W).a.create({baseURL:"/",xsrfHeaderName:"X-CSRFToken",xsrfCookieName:"csrftoken"})}).registerApi,Q={projects:z({url:"/project"}),project:z({url:function(e){var t=e.alias;return"/project/".concat(t)}}),projectExport:z({url:function(e){var t=e.alias;return"/project/export/".concat(t)}}),projectImport:z({url:function(e){var t=e.alias;return"/project/import/".concat(t)}}),todos:z({url:"/todo"}),todo:z({url:function(e){var t=e.alias;return"/todo/".concat(t)}}),startTodo:z({url:function(e){var t=e.alias;return"/todo/start/".concat(t)}}),stopTodo:z({url:function(e){var t=e.alias;return"/todo/stop/".concat(t)}})},Y=n("./node_modules/redux-thunk/es/index.js"),$=n("./node_modules/redux/es/redux.js");function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ce(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}function se(e){var t=0<arguments.length&&void 0!==e?e:de;return function(){function e(){return ae(this,e),te(this,ne(e).apply(this,arguments))}return oe(e,t),ce(e,[{key:"updateProgress",value:function(e,o){var r=o.progress=0;e.forEach(function(e){var t=e.duration;r+=t}),e.forEach(function(e){var t=e.progress,n=e.duration;o.progress+=n/r*t})}},{key:"updateRootProgress",value:function(){this.updateProgress(this.todos,this)}},{key:"updateParentProgress",value:function(e){var t=this.todosHash[e];this.updateProgress(t.subTask,t),t.parent?this.updateParentProgress(t.parent):this.updateRootProgress()}},{key:"addDefaultProgressHigh",value:function(e){e.progress=100}},{key:"addToProgress",value:function(e){e.done?this.addDefaultProgressHigh(e):this.updateProgress(e.subTask,e),e.parent?this.updateParentProgress(e.parent):this.updateRootProgress()}}]),e}()}function le(e){var t=0<arguments.length&&void 0!==e?e:de;return function(){function e(){return ae(this,e),te(this,ne(e).apply(this,arguments))}return oe(e,se(t)),ce(e,[{key:"updateProgress",value:function(e,o){var r=o._progress=0;e.forEach(function(e){var t=e.duration;r+=t}),e.forEach(function(e){var t=e._progress,n=e.duration;o._progress+=n/r*t}),o.progress=parseInt(10*o._progress)/10}},{key:"addDefaultProgressHigh",value:function(e){e.progress=100,e._progress=100}}]),e}()}function ue(e){var t=0<arguments.length&&void 0!==e?e:de;return function(){function n(e){var t;return ae(this,n),(t=te(this,ne(n).call(this,e))).ascOrder=!0,t}return oe(n,t),ce(n,[{key:"sort",value:function(e){q(e,this.ascOrder)}}]),n}()}var pe=function(){function e(){ae(this,e),this.todos=[],this.todosHash={},this.updatedAt=(new Date).getTime(),this.progress=0}return ce(e,[{key:"updateProgress",value:function(){}},{key:"updateRootProgress",value:function(){}},{key:"updateParentProgress",value:function(){}},{key:"addToProgress",value:function(){}},{key:"sort",value:function(){}},{key:"sortAll",value:function(){}}]),e}(),de=function(){function e(){return ae(this,e),te(this,ne(e).apply(this,arguments))}return oe(e,pe),ce(e,[{key:"sortAll",value:function(){var n=this;this.updatedAt=(new Date).getTime(),function t(e){n.sort(e),e.forEach(function(e){e.updatedAt=n.updatedAt,t(e.subTask)})}(this.todos)}},{key:"setUpdatedAt",value:function(e,t){var n=(0<arguments.length&&void 0!==e?e:{}).alias,o=(1<arguments.length?t:void 0)||{updatedAt:(new Date).getTime()},r=this.todosHash[n];if(r){Object.assign(r,o);var a=this.todosHash[r.parent];a&&a.alias?this.setUpdatedAt(a,o):this.updatedAt=o.updatedAt}else this.updatedAt=o.updatedAt}},{key:"getTodo",value:function(e){var t=e.alias;return this.todosHash[t]}},{key:"addTodo",value:function(e){var t=Object.assign({},e),n=this.todosHash[t.alias];if(n?Object.assign(t,n):this.todosHash[t.alias]=t,t.subTask||(t.subTask=[]),t.parent){var o=this.todosHash[t.parent];o||(o={subTask:[]},this.todosHash[t.parent]=o),o.subTask.push(t),this.sort(o.subTask)}else this.todos.push(t),this.sort(this.todos);this.addToProgress(t),this.setUpdatedAt(t)}},{key:"deleteTodo",value:function(e){var t,n=e.alias,o=this.todosHash[n];if(o.parent){var r=this.todosHash[o.parent];t=r.subTask.findIndex(function(e){return e.alias==n}),r.subTask.splice(t,1),this.updateParentProgress(o.parent),this.setUpdatedAt({alias:o.parent})}else t=this.todos.findIndex(function(e){return e.alias==n}),this.todos.splice(t,1),this.updateRootProgress(),this.setUpdatedAt();delete this.todosHash[n]}},{key:"updateTodo",value:function(e){var t=this.todosHash[e.alias],n=Object.assign({},t,e);this.deleteTodo({alias:n.alias}),this.addTodo(n)}}]),e}(),fe=function(){function e(){return ae(this,e),te(this,ne(e).apply(this,arguments))}return oe(e,ue(le(de))),e}();function ye(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function he(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?he(Object(n),!0).forEach(function(e){be(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(){var e=new fe;return e.ascOrder=!1,e}function ve(e,t){var n=t.payload.data;return e.prms[n.project].updateTodo(n),me({},e,{list:ye(e.list)})}var Oe={prms:{},list:[],draggingTodo:null},we={list:[],hash:{},idList:[]},je=n("./node_modules/shortid/index.js");function Ee(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Pe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function Se(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pe(Object(n),!0).forEach(function(e){De(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Te,ke={data:{},order:[],activeModal:null},_e=Object($.c)({project:function(e,t){var n,o,r,a,i,c,s,l,u,p,d,f,y,h,m,b,g,v,O,w,j,E,P,S=0<arguments.length&&void 0!==e?e:Oe,D=1<arguments.length?t:void 0;switch(D.type){case C:return w=S,j=D.payload.data,E={},P=j.map(function(e){var t=ge();return me({},e,{prm:E[e.alias]=t})}),me({},w,{list:ye(P),prms:E});case T:return b=S,g=D.payload.data,v=ge(),O=me({},g,{prm:v}),me({},b,{prms:me({},b.prm,be({},g.alias,v)),list:[].concat(ye(b.list),[O])});case _:return y=S,h=D.payload.data,m=y.list.findIndex(function(e){return e.alias==h.alias}),y.list[m]=me({},y.list[m],{},h),me({},y,{list:ye(y.list)});case k:return function(e,t){var n=t.payload.data;delete e.prms[n.alias];var o=e.list.filter(function(e){return e.alias!=n.alias});return me({},e,{prms:me({},e.prms),list:ye(o)})}(S,D);case H:return i=S,c=D.payload,s=c.data,l=c.project,u=i.prms,p=i.list,d=ge(),f=p.findIndex(function(e){return e.alias=l.alias}),p[f]=me({},l,{prm:d}),s.forEach(function(e){d.addTodo(e)}),me({},i,{prms:me({},u,be({},l.alias,d)),list:ye(p)});case x:return r=S,a=D.payload.data,r.prms[a.project].addTodo(a),me({},r,{list:ye(r.list)});case N:return n=S,o=D.payload.data,n.prms[o.project].deleteTodo(o),me({},n,{list:ye(n.list)});case A:return ve(S,D);case I:return me({},S,{draggingTodo:D.payload.data});case M:return ve(S,D);default:return S}},todo:function(e,t){var n=0<arguments.length&&void 0!==e?e:we;return(1<arguments.length?t:void 0).type,n},modals:function(e,t){var n,o,r,a,i,c,s,l,u=0<arguments.length&&void 0!==e?e:ke,p=1<arguments.length?t:void 0;switch(p.type){case d:return n=u,o=p.payload.data.currentTarget,r=o.dataset,a=o.data,i=r.targetModal,c=r.backDrop,s=Object(je.generate)(),l={targetModal:i,id:s,backDrop:Boolean("true"==c),data:a||null},Se({},n,{activeModal:l,data:Se({},n.data,De({},s,l)),order:[].concat(Ee(n.order),[s])});default:return u}}}),Ce=window.__REDUX_DEVTOOLS_EXTENSION__?Object($.e)(_e,Object($.d)(Object($.a)(Y.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())):Object($.e)(_e,Object($.a)(Y.a)),He=Ce;function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Ie(e){var o="function"==typeof Map?new Map:void 0;return(Ie=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==o){if(o.has(e))return o.get(e);o.set(e,n)}function n(){return Me(e,arguments,Ve(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Re(n,e)})(e)}function Me(e,t,n){return(Me=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&Re(r,n.prototype),r}).apply(null,arguments)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e){var t=e.todoToMove,n=e.referenceTodo;return e.direction!=Ke&&t.parent==n.parent}function Fe(e){var t=e.referenceTodo,n=e.todoToMove,o=e.targetTodoList,r=o.findIndex(function(e){return e.alias==n.alias}),a=t.position,i=o.findIndex(function(e){return e.alias==t.alias}),c=i-1,s=o[c],l=(s||{position:null}).position,u=i+1,p=o[u];return{nextTodo:p,nextTodoIndex:u,nextTodoPosition:(p||{position:null}).position,todoIndex:r,refrenceTodoIndex:i,refrenceTodoPosition:a,previousTodo:s,previousTodoIndex:c,previousTodoPosition:l}}var Ue="up",qe="down",Ke="child",Ze=function(){function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n="at index '".concat(e,"'");return(t=Ne(this,Ve(o).call(this,n))).position=e,t.name="SamePositionException",t.message=n,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(o,Ie(Error)),o}(),Xe=(Ae(Te={},Ue,function(e){var t=Fe(e),n=t.previousTodoPosition,o=t.todoIndex,r=t.previousTodoIndex,a=t.refrenceTodoPosition;if(Le(e)&&-1!=o&&o==r)throw new Ze(o);return null==n?a/2:(a+n)/2}),Ae(Te,qe,function(e){var t=Fe(e),n=t.nextTodoPosition,o=t.todoIndex,r=t.nextTodoIndex,a=t.refrenceTodoPosition;if(Le(e)&&-1!=o&&o==r)throw new Ze(o);return null==n?a+1:(a+n)/2}),Ae(Te,Ke,function(){return 1}),Te);function Be(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function Ge(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Be(Object(n),!0).forEach(function(e){Je(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function We(n){return function(t){Q.todos.get({project:n.alias}).then(function(e){t({type:H,payload:{project:n,data:e.getData()}})}).catch(function(e){console.error(e)})}}function ze(e){var n=e.id,t=e.error,o=e.name,r=e.helpText;return t&&t[o]&&t[o].map(function(e,t){return g.a.createElement("small",{id:"".concat(n,"-help-").concat(t),key:e,className:"form-text text-danger"},e)})||r&&g.a.createElement("small",{id:"".concat(n,"-help"),className:"form-text text-muted"},r)||null}ze.propTypes={error:s.a.any,helpText:s.a.string,id:s.a.string.isRequired,name:s.a.string.isRequired};var Qe=ze;function Ye(){return(Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function $e(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function et(e){e.error,e.helpText;var t=e.id,n=e.label,o=$e(e,["error","helpText","id","label"]);return g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{htmlFor:t},n),g.a.createElement("input",Ye({id:t,className:"form-control","aria-describedby":"".concat(t,"-help")},o)),g.a.createElement(Qe,e))}et.defaultProps={type:"text"},et.propTypes={name:s.a.string.isRequired,id:s.a.string.isRequired,type:s.a.string,title:s.a.string,placeholder:s.a.string,value:s.a.any,onChange:s.a.func,helpText:s.a.string};var tt=et;function nt(){return(nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function ot(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rt(e){var t=e.id,n=e.label,o=(e.error,e.helpText,ot(e,["id","label","error","helpText"]));return g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{htmlFor:t},n),g.a.createElement("textarea",nt({className:"form-control",id:t},o)),g.a.createElement(Qe,e))}rt.propTypes={id:s.a.string.isRequired,label:s.a.string.isRequired};var at=rt;function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(){return(ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function st(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(Object(n),!0).forEach(function(e){ut(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ht(){}var mt=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=dt(r).call(this,e))||"object"!==it(o)&&"function"!=typeof o?ft(n):o).changeHandler=t.changeHandler.bind(ft(t)),t.submitHandler=t.submitHandler.bind(ft(t)),t.titleField=t.titleField.bind(ft(t)),t.descriptionField=t.descriptionField.bind(ft(t)),t.assetsDirField=t.assetsDirField.bind(ft(t)),t.state={loading:!1,done:!1,error:!1,form:{title:"",description:"",assets_dir:""}},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(r,b["Component"]),e=r,(t=[{key:"componentDidMount",value:function(){var e=this.props.project;e&&this.setState({form:{title:e.title,description:e.description,assets_dir:e.assets_dir}})}},{key:"changeHandler",value:function(e){var t=e.target,n=t.name,o=t.value;this.setState({form:lt({},this.state.form,ut({},n,o))})}},{key:"titleField",value:function(e){var t=this.state,n=t.form,o=t.error;return g.a.createElement(tt,ct({},e,{type:"text",name:"title",label:"Title",error:o,id:"project-title",value:n.title,placeholder:"Project title",title:"Prject Name",helpText:"Project name/title",onChange:this.changeHandler}))}},{key:"descriptionField",value:function(e){var t=this.state,n=t.form,o=t.error;return g.a.createElement(at,ct({},e,{error:o,id:"project-story",label:"Description",name:"description",placeholder:"Project description",title:"Project Description",value:n.description,onChange:this.changeHandler,helpText:"A little description about this project."}))}},{key:"assetsDirField",value:function(e){var t=this.state,n=t.form,o=t.error;return g.a.createElement(tt,ct({},e,{type:"text",name:"assets_dir",label:"Assets Directory",error:o,id:"project-assets",value:n.assets_dir,placeholder:"Assets Directory",title:"Assets Directory",helpText:"Path of a directory for assets",onChange:this.changeHandler}))}},{key:"submitHandler",value:function(e){var t=this;e.preventDefault();var n=this.props,o=n.onSuccess,r=n.onError,a=n.addProject,i=n.updateProject,c=n.project;(c?i:a)({getPayload:function(){return t.state.form},oldPayload:function(){return c},onSuccess:function(){t.setState({loading:!1,done:!0},o)},onError:function(e){t.setState({error:f()(e,"error.response.data",!0),loading:!1},r)}}),this.setState({loading:!0,error:!1})}},{key:"render",value:function(){return this.props.children(lt({},this.state,{onChange:this.changeHandler,onSubmit:this.submitHandler,TitleField:this.titleField,DescriptionField:this.descriptionField,AssetsDirField:this.assetsDirField}))}}])&&pt(e.prototype,t),n&&pt(e,n),r}();mt.defaultProps={onSuccess:ht,onError:ht},mt.propTypes={onSuccess:s.a.func,onError:s.a.func};var bt={addProject:function(n){return function(t){Q.projects.post(n.getPayload()).then(function(e){n.onSuccess(e),t({type:T,payload:{data:e.getData()}})}).catch(function(e){console.error(e),n.onError(e)})}},updateProject:function(n){return function(t){Q.project.put(n.getPayload(),{alias:n.oldPayload().alias}).then(function(e){n.onSuccess(e),t({type:_,payload:{data:e.getData(),oldData:n.oldPayload()}})}).catch(function(e){console.error(e),n.onError(e)})}}},gt=Object(i.b)(null,bt)(mt);function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function wt(e){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pt=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,o=wt(r).call(this,e),(t=!o||"object"!==vt(o)&&"function"!=typeof o?jt(n):o).containerRef=null,t.containerRefHandler=function(e){return t.containerRef=e},t.docClickHandler=t.docClickHandler.bind(jt(t)),t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(r,b["Component"]),e=r,(t=[{key:"docClickHandler",value:function(e){var t=e.target;this.containerRef.contains(t)||(0,this.props.closeEditView)()}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.docClickHandler)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.docClickHandler)}},{key:"render",value:function(){var e=this.props,t=e.project,a=e.closeEditView;return g.a.createElement("div",{ref:this.containerRefHandler},g.a.createElement(gt,{project:t,onSuccess:a},function(e){var t=e.TitleField,n=e.DescriptionField,o=e.AssetsDirField,r=e.onSubmit;return g.a.createElement("form",{onSubmit:r},g.a.createElement("hr",null),g.a.createElement(t,null),g.a.createElement(n,null),g.a.createElement(o,null),g.a.createElement("hr",null),g.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:a},"Close"),g.a.createElement("button",{className:"btn btn-success pull-right",type:"submit",onClick:r},"Save Changes"),g.a.createElement("hr",null))}))}}])&&Ot(e.prototype,t),n&&Ot(e,n),r}();Pt.propTypes={};var St=Pt;function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(n),!0).forEach(function(e){_t(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ht(e){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function At(e,t){return(At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Nt=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,o=Ht(r).call(this,e),(t=!o||"object"!==Dt(o)&&"function"!=typeof o?xt(n):o).inputRef=null,t.containerRef=null,t.inputRefHandler=function(e){return t.inputRef=e},t.containerRefHandler=function(e){return t.containerRef=e},t.focusAtInput=t.focusAtInput.bind(xt(t)),t.onChangeHandler=t.onChangeHandler.bind(xt(t)),t.handleKeyPress=t.handleKeyPress.bind(xt(t)),t.saveTodo=t.saveTodo.bind(xt(t)),t.docClickHandler=t.docClickHandler.bind(xt(t)),t.state={form:{title:"",story:""},error:!1},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}(r,b["Component"]),e=r,(t=[{key:"docClickHandler",value:function(e){this.containerRef.contains(e.target)||(0,this.props.closeView)()}},{key:"onChangeHandler",value:function(e){var t=e.target,n=t.name,o=t.value;this.setState({form:kt({},this.state.form,_t({},n,o))})}},{key:"saveTodo",value:function(){var n=this,e=this.props,t=e.addTodo,o=e.editTodo,r=e.closeView,a=e.project,i=e.todo,c=e.parent,s=i?o:t,l=i?r:function(){n.setState({form:{title:"",story:""}},n.focusAtInput)};s({payload:kt({},this.state.form,{project:a.alias},i?{alias:i.alias}:{},{},c?{parent:c.alias}:{}),onSuccess:l,onError:function(e){var t=e.error;n.setState({error:t.response.data})}})}},{key:"handleKeyPress",value:function(e){var t=this.props.closeView,n=e.target.tagName,o="Enter"==e.key&&("INPUT"==n||"TEXTAREA"==n&&e.ctrlKey);return"Escape"==e.key?t():o?this.saveTodo():void 0}},{key:"focusAtInput",value:function(){this.inputRef.focus()}},{key:"componentDidMount",value:function(){this.focusAtInput(),document.addEventListener("click",this.docClickHandler);var e=this.props.todo;e&&this.setState({form:{title:e.title,story:e.story}})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.docClickHandler)}},{key:"render",value:function(){var e=this.props,t=e.closeView,n=e.todo,o=this.state,r=o.form,a=o.error;return g.a.createElement("div",{className:"add-todo"+(n?" edit-view":""),ref:this.containerRefHandler},g.a.createElement("div",{className:"menu-container left"},g.a.createElement("span",{title:"close",className:"menu",onClick:t},g.a.createElement("i",{className:"fa fa-window-close"})),g.a.createElement("span",{title:"Save",className:"menu",onClick:this.saveTodo},g.a.createElement("i",{className:"fa fa-check"}))),g.a.createElement("input",{type:"text",name:"title",title:"Title",value:r.title,placeholder:"Todo",autoComplete:"off",ref:this.inputRefHandler,onKeyDown:this.handleKeyPress,onChange:this.onChangeHandler}),g.a.createElement(Qe,{error:a,name:"title",id:"title"}),g.a.createElement("textarea",{className:"mt-1",placeholder:"Story",name:"story",title:"Story",autoComplete:"off",value:r.story,onKeyDown:this.handleKeyPress,onChange:this.onChangeHandler}))}}])&&Ct(e.prototype,t),n&&Ct(e,n),r}();Nt.propTypes={};var It={addTodo:function(s){return function(t){var e,n,o,r,a,i,c=Ge({},s.payload,{position:(e=s.payload,n=e.project,o=e.parent,r=He.getState().project.prms[n],a=o?r.getTodo({alias:o}).subTask:r.todos,i=1,a.forEach(function(e){e.position>=i&&(i=e.position+1)}),i)});Q.todos.post(c).then(function(e){s.onSuccess&&s.onSuccess(e),t({type:x,payload:{data:e.getData()}})}).catch(function(e){console.error(e),s.onError&&s.onError(e)})}},editTodo:function(n){return function(t){var e=n.payload;Q.todo.patch(e,{alias:e.alias}).then(function(e){t({type:A,payload:{data:e.getData()}}),n.onSuccess(e)}).catch(function(e){console.error(e)})}}},Mt=Object(i.b)(null,It)(Nt);function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Lt(e){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qt(){}var Kt=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=Lt(r).call(this,e))||"object"!==Rt(o)&&"function"!=typeof o?Ft(n):o).onDragStartHandler=t.onDragStartHandler.bind(Ft(t)),t.onDragOverHandler=t.onDragOverHandler.bind(Ft(t)),t.onDragEnterHandler=t.onDragEnterHandler.bind(Ft(t)),t.onDragLeaveHandler=t.onDragLeaveHandler.bind(Ft(t)),t.onDragEndHandler=t.onDragEndHandler.bind(Ft(t)),t.onDropHandler=t.onDropHandler.bind(Ft(t)),t.dragOverCount=0,t.onDragEnterId=null,t.onDragLeaveId=null,t.dropZoneHandlers={onDragOver:t.onDragOverHandler,onDragEnter:t.onDragEnterHandler,onDragLeave:t.onDragLeaveHandler,onDrop:t.onDropHandler},t.state={dragging:!1,dropZoneEnabled:!1},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(r,b["Component"]),e=r,(t=[{key:"onDragStartHandler",value:function(e){this.setState({dragging:!0}),this.props.onDragStart(e)}},{key:"onDragOverHandler",value:function(e){e.preventDefault(),this.props.onDragOver(e)}},{key:"onDragEnterHandler",value:function(){var e=this;this.state.dragging||(0==this.dragOverCount&&(null!=this.onDragLeaveId?(clearTimeout(this.onDragLeaveId),this.onDragLeaveId=null):this.onDragEnterId=setTimeout(function(){e.setState({dropZoneEnabled:!0}),e.props.onDragEnter(),e.onDragEnterId=null},this.props.delay)),this.dragOverCount++)}},{key:"onDragLeaveHandler",value:function(){var e=this;this.state.dragging||(this.dragOverCount--,0==this.dragOverCount&&(null!=this.onDragEnterId?(clearTimeout(this.onDragEnterId),this.onDragEnterId=null):this.onDragLeaveId=setTimeout(function(){e.setState({dropZoneEnabled:!1}),e.props.onDragLeave(),e.onDragLeaveId=null},this.props.delay)))}},{key:"onDragEndHandler",value:function(e){this.setState({dragging:!1}),this.props.onDragEnd(e)}},{key:"onDropHandler",value:function(e){this.dragOverCount=0,this.setState({dropZoneEnabled:!1}),this.props.onDrop(e)}},{key:"render",value:function(){var e=this.state,t=e.dropZoneEnabled,n=e.dragging;return this.props.children({dragging:n,dropZoneEnabled:t,dropZoneHandlers:this.dropZoneHandlers,onDragStartHandler:this.onDragStartHandler,onDragOverHandler:this.onDragOverHandler,onDragEnterHandler:this.onDragEnterHandler,onDragLeaveHandler:this.onDragLeaveHandler,onDragEndHandler:this.onDragEndHandler,onDropHandler:this.onDropHandler})}}])&&Vt(e.prototype,t),n&&Vt(e,n),r}();Kt.propTypes={onDragStart:s.a.func,onDragOver:s.a.func,onDragEnter:s.a.func,onDragLeave:s.a.func,onDragEnd:s.a.func,onDrop:s.a.func,delay:s.a.number},Kt.defaultProps={onDragStart:qt,onDragOver:qt,onDragEnter:qt,onDragLeave:qt,onDragEnd:qt,onDrop:qt,delay:500};var Zt=Kt;function Xt(e){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bt(){return(Bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Gt(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Jt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Wt(e){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qt(e,t){return(Qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Yt=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=Wt(r).call(this,e))||"object"!==Xt(o)&&"function"!=typeof o?zt(n):o).onDropHandler=t.onDropHandler.bind(zt(t)),t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qt(e,t)}(r,b["Component"]),e=r,(t=[{key:"onDropHandler",value:function(e){this.props.onDrop(e),this.props.onDropHandler(e)}},{key:"render",value:function(){var e=this.props,t=e.enable,n=(e.onDropHandler,Gt(e,["enable","onDropHandler"]));return t?g.a.createElement("div",Bt({},n,{className:"drop-zone",onDrop:this.onDropHandler})):null}}])&&Jt(e.prototype,t),n&&Jt(e,n),r}();Yt.propTypes={onDropHandler:s.a.func},Yt.defaultProps={onDropHandler:function(){}};var $t=Yt;function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function nn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tn(Object(n),!0).forEach(function(e){on(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function on(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function an(e){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sn(e,t){return(sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ln(e){var t=e.placeholder,n=e.name,o=e.value,r=e.onChange,a=e.onKeyPress,i=e.refHandler;return g.a.createElement("input",{min:"0",step:"1",type:"number",value:o,ref:i,name:n,title:t,onChange:r,onKeyDown:a,placeholder:t})}ln.defaultProps={refHandler:function(){}};var un=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=an(r).call(this,e))||"object"!==en(o)&&"function"!=typeof o?cn(n):o).hourElem=Object(b.createRef)(),t.onChange=t.onChange.bind(cn(t)),t.onKeyPress=t.onKeyPress.bind(cn(t)),t.state={hour:0,min:0,sec:0,totalSec:0},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)}(r,b["Component"]),e=r,(t=[{key:"onKeyPress",value:function(e){"Escape"==e.key&&this.props.onClose&&this.props.onClose(nn({},this.state,{type:"close"})),"Enter"==e.key&&this.props.onSubmit&&this.props.onSubmit(nn({},this.state,{type:"submit"}))}},{key:"onChange",value:function(e){var t,n,o=e.target.name,r=parseFloat(e.target.value),a=(on(t={hour:this.state.hour,min:this.state.min,sec:this.state.sec},o,r),on(t,"totalSec",0),t);a.totalSec=3600*a.hour+60*a.min+a.sec,this.setState((on(n={},o,r),on(n,"totalSec",a.totalSec),n)),this.props.onChange&&this.props.onChange(nn({},a))}},{key:"format",value:function(e){var t={hour:0,min:0,sec:e,totalSec:0};return t.hour=parseInt(t.sec/3600),t.sec=t.sec-3600*t.hour,t.min=parseInt(t.sec/60),t.sec=t.sec-60*t.min,t.totalSec=3600*t.hour+60*t.min+t.sec,t}},{key:"componentDidMount",value:function(){this.setState(nn({},this.format(this.props.duration))),this.hourElem.current.focus()}},{key:"componentDidUpdate",value:function(e){var t=this.props.duration;e.duration!=t&&this.setState(nn({},this.format(t)))}},{key:"render",value:function(){var e=this.state,t=e.hour,n=e.min,o=e.sec;return g.a.createElement("div",{className:"duration-field"},g.a.createElement(ln,{name:"hour",value:t,refHandler:this.hourElem,onChange:this.onChange,onKeyPress:this.onKeyPress,placeholder:"Hour"}),g.a.createElement(ln,{name:"min",value:n,onChange:this.onChange,onKeyPress:this.onKeyPress,placeholder:"Min"}),g.a.createElement(ln,{name:"sec",value:o,onChange:this.onChange,onKeyPress:this.onKeyPress,placeholder:"Sec"}))}}])&&rn(e.prototype,t),n&&rn(e,n),r}();function pn(e){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function yn(e,t,n){return t&&fn(e.prototype,t),n&&fn(e,n),e}function hn(e,t){return!t||"object"!==pn(t)&&"function"!=typeof t?mn(e):t}function mn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bn(e){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vn(e,t)}function vn(e,t){return(vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var On=function(){function n(e){var t;return dn(this,n),(t=hn(this,bn(n).call(this,e))).state={time:""},t}return gn(n,b["Component"]),yn(n,[{key:"format",value:function(e){function t(e){e<10&&(n+="0")}var n="",o={day:0,hour:0,min:0,sec:e};return 86399<o.sec&&(o.day=parseInt(o.sec/86400),n+=o.day+"d",o.sec=o.sec-86400*o.day),3599<o.sec&&(o.hour=parseInt(o.sec/3600),o.day&&(n+=" "),t(o.hour),n+=o.hour+":",o.sec=o.sec-3600*o.hour),59<o.sec?(o.min=parseInt(o.sec/60),t(o.min),n+=o.min+":",o.sec=o.sec-60*o.min,t(o.sec),n+=o.sec):o.hour||o.sec?(n+="00:",t(o.sec),n+=o.sec):n+="00:00",n}},{key:"componentDidMount",value:function(){var e=this.props.time;this.setState({time:this.format(e)})}},{key:"componentDidUpdate",value:function(e){e.time!=this.props.time&&this.setState({time:this.format(this.props.time)})}},{key:"render",value:function(){var e=this.state.time;return g.a.createElement("span",{onClick:this.props.onClick},e)}}]),n}();On.defaultProps={onClick:function(){}};var wn=function(){function n(e){var t;return dn(this,n),(t=hn(this,bn(n).call(this,e))).startCountdownInterval=t.startCountdownInterval.bind(mn(t)),t.startCountdown=t.startCountdown.bind(mn(t)),t.stopCountdownInterval=t.stopCountdownInterval.bind(mn(t)),t.stopCountdown=t.stopCountdown.bind(mn(t)),t.toggleEditView=t.toggleEditView.bind(mn(t)),t.onSubmitDurationEdit=t.onSubmitDurationEdit.bind(mn(t)),t.timer=null,t.state={counting:!1,timeSpan:0,busy:!1,edit:!1},t}return gn(n,b["Component"]),yn(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.todo;this.setState({timeSpan:t.time_span},function(){t.wip&&e.startCountdownInterval()})}},{key:"componentWillUnmount",value:function(){this.stopCountdownInterval()}},{key:"componentDidUpdate",value:function(e){var t=this.props.todo;e.todo.time_span!=t.time_span&&this.setState({timeSpan:t.time_span}),e.todo.wip!=t.wip&&(t.wip?this.startCountdownInterval():this.stopCountdownInterval())}},{key:"startCountdownInterval",value:function(){var e=this;this.state.busy||this.state.counting||(this.setState({counting:!0}),this.timer=setInterval(function(){e.setState(function(e){return{timeSpan:e.timeSpan+1}})},1e3))}},{key:"startCountdown",value:function(){this.state.busy||this.state.counting||(this.startCountdownInterval(),this.props.startCountdown(this.props.todo.alias))}},{key:"stopCountdownInterval",value:function(){this.state.busy||this.timer&&this.state.counting&&(this.setState({counting:!1}),clearInterval(this.timer),this.timer=null)}},{key:"stopCountdown",value:function(){this.state.busy||this.timer&&this.state.counting&&(this.stopCountdownInterval(),this.props.stopCountdown(this.props.todo.alias))}},{key:"toggleEditView",value:function(){this.setState({edit:!this.state.edit})}},{key:"onSubmitDurationEdit",value:function(e){this.setState({edit:!1});var t=this.props.todo;this.props.updateTodoData({alias:t.alias,duration:e.totalSec})}},{key:"render",value:function(){var e=this.props.todo,t=this.state,n=t.counting,o=t.timeSpan,r=t.edit,a=e.duration-o;return g.a.createElement(b.Fragment,null,n?g.a.createElement("span",{className:"menu",title:"Stop countdown",onClick:this.stopCountdown},g.a.createElement("i",{className:"fa fa-pause-circle-o"})):g.a.createElement("span",{className:"menu",title:"Start countdown",onClick:this.startCountdown},g.a.createElement("i",{className:"fa fa-play-circle-o"})),g.a.createElement("span",{className:"menu clock duration"},r?g.a.createElement(un,{onClose:this.toggleEditView,duration:e.duration,onSubmit:this.onSubmitDurationEdit}):g.a.createElement(On,{time:e.duration,onClick:this.toggleEditView})),0<o&&g.a.createElement(b.Fragment,null,g.a.createElement("span",{className:"menu clock countdown"},a<0&&"+",g.a.createElement(On,{time:-1<a?a:-1*a}))))}}]),n}();function jn(e){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function En(){return(En=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Pn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tn(e,t){return(Tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kn=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=Sn(r).call(this,e))||"object"!==jn(o)&&"function"!=typeof o?Dn(n):o).deleteTodo=t.deleteTodo.bind(Dn(t)),t.toggleDetailsViewHandler=t.toggleDetailsViewHandler.bind(Dn(t)),t.toggleEditView=t.toggleEditView.bind(Dn(t)),t.toggleAddView=t.toggleAddView.bind(Dn(t)),t.toggleStatus=t.toggleStatus.bind(Dn(t)),t.onDragStartHandler=t.onDragStartHandler.bind(Dn(t)),t.onDragEndHandler=t.onDragEndHandler.bind(Dn(t)),t.onDropUp=t.onDropUp.bind(Dn(t)),t.onDropDown=t.onDropDown.bind(Dn(t)),t.onDropChild=t.onDropChild.bind(Dn(t)),t.state={addView:!1,editView:!1,detailsView:!0,subMenuExpended:!1},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tn(e,t)}(r,b["Component"]),e=r,(t=[{key:"onDragStartHandler",value:function(){this.props.updateDraggingTodo(this.props.todo)}},{key:"onDragEndHandler",value:function(){this.props.updateDraggingTodo(null)}},{key:"onDropUp",value:function(){this.props.onDropTodo({todoToMove:this.props.draggingTodo,referenceTodo:this.props.todo,direction:Ue})}},{key:"onDropDown",value:function(){this.props.onDropTodo({todoToMove:this.props.draggingTodo,referenceTodo:this.props.todo,direction:qe})}},{key:"onDropChild",value:function(){this.props.onDropTodo({todoToMove:this.props.draggingTodo,referenceTodo:this.props.todo,direction:Ke})}},{key:"deleteTodo",value:function(){if(confirm("Do you want to delete this?")){var e=this.props,t=e.deleteTodo;t(e.todo)}}},{key:"toggleDetailsViewHandler",value:function(){this.setState(function(e){return{detailsView:!e.detailsView}})}},{key:"toggleEditView",value:function(){this.setState(function(e){return{editView:!e.editView}})}},{key:"toggleAddView",value:function(){this.setState(function(e){return{addView:!e.addView}})}},{key:"toggleStatus",value:function(e){this.props.updateTodoData({alias:this.props.todo.alias,done:e.target.checked})}},{key:"render",value:function(){var t=this,e=this.props,n=e.todo,o=e.project,r=e.startCountdown,a=e.stopCountdown,i=e.updateTodoData,c=n.title,s=n.rq,l=n.story,u=n.subTask,p=n.done,d=n.progress,f=this.state,y=f.addView,h=f.editView,m=f.detailsView;return g.a.createElement(Zt,{onDragStart:this.onDragStartHandler,onDragEnd:this.onDragEndHandler},function(e){return g.a.createElement(b.Fragment,null,g.a.createElement($t,En({},e.dropZoneHandlers,{onDropHandler:t.onDropUp,enable:e.dropZoneEnabled})),!h&&g.a.createElement("div",{draggable:!0,className:"todo-short-info"+(p?" done":"")+(e.dropZoneEnabled?" over":""),onDragEnd:e.onDragEndHandler,onDragStart:e.onDragStartHandler},g.a.createElement("div",{className:"left menu-container"},g.a.createElement("span",{className:"menu"},g.a.createElement("i",{className:"fa fa-angle-double-".concat(m?"down":"right")})),g.a.createElement("span",{className:"menu checkbox"},g.a.createElement("input",{type:"checkbox",checked:p,onChange:t.toggleStatus}))),g.a.createElement("div",{className:"todo-info"},g.a.createElement("div",En({title:l},e.dropZoneHandlers,{className:"short-view title",onDoubleClick:t.toggleEditView,onClick:t.toggleDetailsViewHandler}),g.a.createElement("span",{className:"text-muted"},"[#",s," (",d,"%)] "),g.a.createElement("span",null,c)),m&&g.a.createElement("div",{className:"story text-muted"},l.split("\n").map(function(e){return g.a.createElement("p",{className:"mb-0",key:e},e)})),g.a.createElement($t,En({},e.dropZoneHandlers,{onDropHandler:t.onDropChild,enable:e.dropZoneEnabled}))),y&&g.a.createElement(Mt,{parent:n,project:o,closeView:t.toggleAddView}),g.a.createElement("div",{className:"right menu-container"},g.a.createElement("span",{className:"menu",onClick:t.toggleAddView},y&&g.a.createElement("i",{title:"Close",className:"fa fa-window-close"})||g.a.createElement("i",{title:"Add Subtask",className:"fa fa-plus"})),g.a.createElement("span",{onClick:t.toggleEditView,className:"menu"},g.a.createElement("i",{title:"Edit",className:"fa fa-edit"})),g.a.createElement("span",{title:"Delete",onClick:t.deleteTodo,className:"menu"},g.a.createElement("i",{className:"fa fa-trash"})),g.a.createElement(wn,{todo:n,startCountdown:r,updateTodoData:i,stopCountdown:a}))),h&&g.a.createElement(Mt,{todo:n,project:o,closeView:t.toggleEditView}),u&&0<u.length&&g.a.createElement("div",{className:"todo-list"},g.a.createElement(xn,{project:o,todoList:u})),g.a.createElement($t,En({},e.dropZoneHandlers,{onDropHandler:t.onDropDown,enable:e.dropZoneEnabled})))})}}])&&Pn(e.prototype,t),n&&Pn(e,n),r}();kn.propTypes={todo:s.a.shape({title:s.a.string.isRequired}).isRequired};function _n(e){var t=e.todoList,n=e.project;return t.map(function(e){return g.a.createElement(Hn,{key:e.alias,todo:e,project:n,updatedAt:e.updatedAt})})}var Cn={deleteTodo:function(n){return function(t){Q.todo.delete({alias:n.alias}).then(function(e){t({type:N,payload:{data:n,response:e}})}).catch(function(e){console.error(e)})}},updateDraggingTodo:function(t){return function(e){e({type:I,payload:{data:t}})}},onDropTodo:function(u){return function(t){var e=u.referenceTodo,n=u.todoToMove,o=u.direction,r=He.getState().project.prms[n.project];if(e.project==n.project){var a,i,c,s=Le(Ge({},u,{direction:o}));try{i={direction:o,todoToMove:n,referenceTodo:e,targetTodoList:e.parent?r.getTodo({alias:e.parent}).subTask:r.todos},c=i.direction,a=Xe[c](i)}catch(e){if(e instanceof Ze)return;throw e}var l=s?{}:{parent:o==Ke?e.alias:e.parent?e.parent:null};Q.todo.patch(Ge({alias:n.alias,position:a},l),{alias:n.alias}).then(function(e){t({type:M,payload:{data:e.getData()}})}).catch(function(e){console.error(e)})}}},updateTodoData:function(e){return function(t){Q.todo.patch(e,{alias:e.alias}).then(function(e){t({type:A,payload:{data:e.getData()}})}).catch(function(e){console.error(e)})}},startCountdown:function(t){return function(e){Q.startTodo.get({alias:t})}},stopCountdown:function(t){return function(e){Q.stopTodo.get({alias:t})}}},Hn=Object(i.b)(function(e){return{draggingTodo:e.project.draggingTodo}},Cn)(kn);_n.propTypes={};var xn=_n;function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function In(e){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rn(e,t){return(Rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vn=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=In(r).call(this,e))||"object"!==An(o)&&"function"!=typeof o?Mn(n):o).toggleView=t.toggleView.bind(Mn(t)),t.toggleEditView=t.toggleEditView.bind(Mn(t)),t.deleteHandler=t.deleteHandler.bind(Mn(t)),t.showTodoAddView=t.showTodoAddView.bind(Mn(t)),t.hideTodoAddView=t.hideTodoAddView.bind(Mn(t)),t.exportProject=t.exportProject.bind(Mn(t)),t.importProject=t.importProject.bind(Mn(t)),t.state={showTodoList:!1,editView:!1,todoAddView:!1},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rn(e,t)}(r,b["Component"]),e=r,(t=[{key:"showTodoAddView",value:function(){this.setState({todoAddView:!0})}},{key:"hideTodoAddView",value:function(){this.setState({todoAddView:!1})}},{key:"toggleView",value:function(){var e=this.state.showTodoList,t=this.props,n=t.getTodos,o=t.project;e||n(o),this.setState({showTodoList:!e})}},{key:"toggleEditView",value:function(){this.setState(function(e){return{editView:!e.editView}})}},{key:"exportProject",value:function(){var e=this.props,t=e.exportProject;t(e.project.alias)}},{key:"importProject",value:function(){var e=this.props,t=e.importProject;t(e.project.alias)}},{key:"deleteHandler",value:function(){if(confirm("Do you want to delete this project?")){var e=this.props,t=e.project;(0,e.deleteProject)(t)}}},{key:"render",value:function(){var e=this.state,t=e.showTodoList,n=e.editView,o=e.todoAddView,r=this.props.project,a=r.title,i=r.description,c=r.prm,s=c.todos,l=c.progress;return g.a.createElement("div",{className:"project-view"},g.a.createElement("div",{className:"left menu-container"},g.a.createElement("span",{className:"menu"},g.a.createElement("i",{className:"fa fa-angle-double-".concat(t?"down":"right")}))),g.a.createElement("div",{className:"short-info"},g.a.createElement("div",{className:"title",onClick:this.toggleView},g.a.createElement("span",{className:"text-muted"},l?"[".concat(l,"%]"):""," "),g.a.createElement("span",{title:i},a)),n&&g.a.createElement(St,{project:r,closeEditView:this.toggleEditView}),o&&g.a.createElement(Mt,{project:r,closeView:this.hideTodoAddView}),t&&g.a.createElement(xn,{project:r,todoList:s})),g.a.createElement("div",{className:"right menu-container"},g.a.createElement("span",{className:"menu",onClick:this.showTodoAddView},o&&g.a.createElement("i",{title:"Close",className:"fa fa-window-close"})||g.a.createElement("i",{title:"Add Todo",className:"fa fa-plus"})),g.a.createElement("span",{className:"menu",onClick:this.toggleEditView},n&&g.a.createElement("i",{title:"Close",className:"fa fa-window-close"})||g.a.createElement("i",{title:"Edit Project",className:"fa fa-edit"})),g.a.createElement("span",{className:"menu",title:"Export Project into assets",onClick:this.exportProject},g.a.createElement("i",{className:"fa fa-download"})),g.a.createElement("span",{className:"menu",title:"Import Project from assets",onClick:this.importProject},g.a.createElement("i",{className:"fa fa-upload"})),g.a.createElement("span",{className:"menu",title:"Delete Project",onClick:this.deleteHandler},g.a.createElement("i",{className:"fa fa-trash"}))))}}])&&Nn(e.prototype,t),n&&Nn(e,n),r}();Vn.propTypes={};var Ln=Vn;function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function qn(e,t){return!t||"object"!==Fn(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Kn(e){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xn=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),qn(this,Kn(e).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}(e,b["Component"]),t=e,(n=[{key:"componentDidMount",value:function(){this.props.getProjectList()}},{key:"render",value:function(){var t=this,e=this.props.projectList;return g.a.createElement("div",{id:"todo-list-container"},e.map(function(e){return g.a.createElement(Ln,{key:e.alias,updatedAt:e.prm.updatedAt,project:e,getTodos:t.props.getTodos,deleteProject:t.props.deleteProject,exportProject:t.props.exportProject,importProject:t.props.importProject})}))}}])&&Un(t.prototype,n),o&&Un(t,o),e}(),Bn={getTodos:We,getProjectList:function(){return function(t){Q.projects.get().then(function(e){t({type:C,payload:{data:e.getData()}})}).catch(function(e){console.error(e)})}},deleteProject:function(n){return function(t){Q.project.delete({alias:n.alias}).then(function(e){t({type:k,payload:{data:n,response:e}})}).catch(function(e){console.error(e)})}},exportProject:function(t){return function(e){Q.projectExport.get({alias:t}).catch(function(e){console.error(e)})}},importProject:function(t){return function(e){Q.projectImport.get({alias:t}).then(function(){We({alias:t})(e)}).catch(function(e){console.error(e)})}}},Gn=Object(i.b)(function(e){return{projectList:e.project.list}},Bn)(Xn);function Jn(e){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wn(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Qn(e,t){return!t||"object"!==Jn(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Yn(e){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $n(e,t){return($n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eo(e){var t=e.id;return e.delay,function(r){var e=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Qn(this,Yn(e).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$n(e,t)}(e,b["Component"]),t=e,(n=[{key:"componentDidMount",value:function(){this.props.showModalHandler()}},{key:"render",value:function(){var e=this.props,t=(e.showModalHandler,Wn(e,["showModalHandler"]));return g.a.createElement(r,t)}}])&&zn(t.prototype,n),o&&zn(t,o),e}();return no[t]=e}}function to(e){var t=e.show;return g.a.createElement("div",{className:"modal-backdrop fade"+(t?" show":"")})}var no={};function oo(e){return(oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ro(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function io(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function co(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function so(e){return(so=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uo(e,t){return(uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var po=function(){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=so(r).call(this,e))||"object"!==oo(o)&&"function"!=typeof o?lo(n):o).mountedModalsId=[],t.mountModal=t.mountModal.bind(lo(t)),t.showModal=t.showModal.bind(lo(t)),t.closeModal=t.closeModal.bind(lo(t)),t.updateModals=t.updateModals.bind(lo(t)),t.docClickHandler=t.docClickHandler.bind(lo(t)),t.state={MountedModals:[]},t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uo(e,t)}(r,b["Component"]),e=r,(t=[{key:"updateModals",value:function(e){var t=this.state.MountedModals;this.setState({MountedModals:io(t)},e||function(){})}},{key:"docClickHandler",value:function(e){var t=this.state.MountedModals;if(0!=t.length){var n=t[t.length-1];if(n.ref)if(n.show&&n.fadeEffect)e.target==n.ref&&n.closeModalHandler()}}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.docClickHandler)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.docClickHandler)}},{key:"showModal",value:function(e){var o=this,r=e.id;return function(){var e=o.state.MountedModals,t=o.props.delay;if(o.mountedModalsId.includes(r)){var n=e.find(function(e){return e.id==r});n.show=!0,o.updateModals(function(){setTimeout(function(){n.fadeEffect=!0,o.updateModals()},t)})}}}},{key:"closeModal",value:function(e){var o=this,r=e.id;return function(){var e=o.state.MountedModals,t=o.props.delay;if(o.mountedModalsId.includes(r)){var n=e.find(function(e){return e.id==r});n.fadeEffect=!1,o.updateModals(function(){setTimeout(function(){n.show=!1,o.updateModals(function(){o.unMountModal({id:r})})},t)})}}}},{key:"unMountModal",value:function(e){var t=e.id,n=this.state.MountedModals;this.setState({MountedModals:n.filter(function(e){return e.id!=t})}),this.mountedModalsId.splice(this.mountedModalsId.indexOf(t),1)}},{key:"mountModal",value:function(e){var t=this.state.MountedModals,n=e.id,o=e.targetModal;if(!this.mountedModalsId.includes(n)){this.mountedModalsId.push(n);var r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ro(Object(n),!0).forEach(function(e){ao(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ro(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e,{Modal:no[o],show:!1,fadeEffect:!1,ref:null,refHandler:function(e){return r.ref=e},showModalHandler:this.showModal({id:n}),closeModalHandler:this.closeModal({id:n})});this.setState({MountedModals:[].concat(io(t),[r])})}}},{key:"componentDidUpdate",value:function(e){var t=this.props.modals.activeModal;e.modals.activeModal!=t&&t&&this.mountModal(t)}},{key:"render",value:function(){var e=this.state.MountedModals,l=this.props.modals;return e.map(function(e){var t=e.id,n=e.backDrop,o=e.refHandler,r=e.show,a=e.fadeEffect,i=e.closeModalHandler,c=e.showModalHandler,s=e.Modal;return g.a.createElement(b.Fragment,{key:t},g.a.createElement(s,{modal:l.data[t],modalShow:r,modalFadeIn:a,modalClose:i,modalRefHandler:o,showModalHandler:c}),n&&g.a.createElement(to,{show:r}))})}}])&&co(e.prototype,t),n&&co(e,n),r}();po.propTypes={},po.defaultProps={delay:200};var fo=Object(i.b)(function(e){return{modals:e.modals}})(po);function yo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function ho(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mo(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function bo(e){var s=e.modalClose;return g.a.createElement(gt,{onSuccess:s},function(e){var t=e.loading,n=e.done,o=e.error,r=e.onSubmit,a=e.TitleField,i=e.DescriptionField,c=e.AssetsDirField;return g.a.createElement("div",{className:"modal-dialog",role:"document"},g.a.createElement("div",{className:"modal-content"},g.a.createElement("div",{className:"modal-header"},g.a.createElement("h5",{className:"modal-title"},"Add Project"),g.a.createElement("button",{type:"button",className:"close",onClick:s,"aria-label":"Close"},g.a.createElement("span",{"aria-hidden":"true"},""))),g.a.createElement("div",{className:"modal-body"},g.a.createElement("form",{onSubmit:r},g.a.createElement(a,null),g.a.createElement(i,null),g.a.createElement(c,null))),g.a.createElement("div",{className:"modal-footer"},g.a.createElement("button",{type:"button",onClick:s,className:"btn btn-secondary mr-auto","data-dismiss":"modal"},"Close"),g.a.createElement("button",{type:"button",className:"btn ".concat(o?"btn-danger":"btn-primary"),onClick:r},t&&g.a.createElement("span",null,g.a.createElement("span",{role:"status","aria-hidden":"true",className:"spinner-border spinner-border-sm"})," Saving...")||n&&g.a.createElement("span",null,g.a.createElement("i",{className:"fa fa-check","aria-hidden":"true"})," Done")||o&&g.a.createElement("span",null,"Try again")||g.a.createElement("span",null,"Save changes")))))})}var go=function(e){var t=e.id,n=mo(e,["id"]);return function(r){return eo(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yo(Object(n),!0).forEach(function(e){ho(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yo(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({id:t},n))(function(e){var t=e.modalFadeIn,n=e.modalShow,o=e.modalRefHandler;return g.a.createElement("div",{className:"modal fade"+(t?" show":"")+(n?" d-block":""),ref:o},g.a.createElement(r,e))})}};bo.propTypes={};function vo(){return g.a.createElement(b.Fragment,null,g.a.createElement(Gn,null),g.a.createElement(u,null),g.a.createElement(fo,null))}go({id:"project"})(bo);vo.propTypes={};var Oo=vo;!function(e){var t=document.querySelector('head link[rel="shortcut icon"]'),n="".concat("/static/").concat(e);if(t)t.href=n;else{var o=document.createElement("link");o.rel="shortcut icon",o.type="image/x-icon",o.href=n,document.head.appendChild(o)}}("favicon.ico"),a.a.render(g.a.createElement(function(){return g.a.createElement(i.a,{store:Ce},g.a.createElement(Oo,null))},null),document.getElementById("app"))},1:function(e,t,n){e.exports=n("./app/index.js")}},[[1,0,6,1,16,20,12,2,14,15,13,19,21,23,4,5,9,10,11,18,17]]]);